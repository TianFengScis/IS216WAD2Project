(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},n={app:0},r=[];function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"0995":function(e,t,s){"use strict";s("cbbb")},2941:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("navbar"),s("router-view")],1)},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"navbar"}},[s("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-dark"},[s("div",{staticClass:"container-fluid"},[s("a",{staticClass:"navbar-brand text-light",attrs:{href:"\\"}},[e._v("SCIS Reddit")]),e._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavAltMarkup"}},[e._m(1),s("div",{staticStyle:{"text-align":"right"}},[s("a",{staticClass:"btn btn-outline-light my-2 mx-2",attrs:{type:"button",id:"loginBtn"},on:{click:function(t){return e.loginPage()}}},[e._v("LogIn")]),s("a",{staticClass:"btn btn-outline-light my-2 mx-2",staticStyle:{display:"none"},attrs:{type:"button",id:"logoutBtn"},on:{click:function(t){return e.logout()}}},[e._v("LogOut")]),s("a",{staticClass:"btn btn-outline-light my-2 mx-2",attrs:{type:"button",id:"registerButton"},on:{click:function(t){return e.registerPage()}}},[e._v("Register")])])])])])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"navbar-toggler bg-secondary",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"navbar-nav",staticStyle:{"text-align":"left"}},[s("a",{staticClass:"nav-link active text-light my-2",attrs:{"aria-current":"page",href:"\\"}},[e._v("Home")]),s("a",{staticClass:"nav-link text-light my-2",attrs:{href:"\\Community"}},[e._v("Community")]),s("a",{staticClass:"nav-link text-light my-2",attrs:{href:"\\Messages"}},[e._v("Messages")]),s("a",{staticClass:"nav-link text-light my-2",attrs:{href:".\\Games\\Dodge the Anchor\\ss.html"}},[e._v("Games")])])}],l=s("ea7b"),c={name:"navbar",props:{msg:String},methods:{loginPage:function(){window.location.href="/Login"},registerPage:function(){window.location.href="/Register"},logout:function(){var e=Object(l["b"])();Object(l["f"])(e).then((function(){alert("successfully logged out"),d()})).catch((function(e){console.log(e)}))}}};function u(){var e=document.getElementById("loginBtn");e.style.display="none";var t=document.getElementById("registerButton");t.style.display="none";var s=document.getElementById("logoutBtn");s.style.display="block"}function d(){var e=document.getElementById("loginBtn");e.style.display="";var t=document.getElementById("registerButton");t.style.display="";var s=document.getElementById("logoutBtn");s.style.display="none",window.location.href="/"}window.onload=function(){var e=Object(l["b"])();Object(l["c"])(e,(function(e){e&&u()}))};var m=c,p=s("2877"),h=Object(p["a"])(m,i,o,!1,null,"0cca8e92",null),f=h.exports,v={name:"App",components:{navbar:f}},g=v,b=(s("034f"),Object(p["a"])(g,n,r,!1,null,null,null)),w=b.exports,y=s("5f5b"),C=s("b1e0"),k=s("260b"),_=(s("f9e3"),s("2dd8"),s("8c4f")),x=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},P=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"indexbg"}},[s("h1",{staticClass:"title"},[e._v("Singapore"),s("br"),e._v("Management University")]),s("div",{attrs:{id:"background"}},[s("span",[e._v("SCIS")])]),s("h2",{staticClass:"placeholdertext"},[e._v(" The BSc (Computer Science) degree equips students with an understanding of the interplay between computing theory and practice and the essential links between them, as well as fundamental business innovation and IT solution development and management skills.")])])}],j=(s("99af"),{name:"indexbg"});document.addEventListener("scroll",(function(){var e=window.scrollY,t=document.getElementById("background");null!=t&&(t.style.backgroundPosition=0!==e?"calc(50% + ".concat(e,"px) calc(50% + ").concat(e,"px)"):"")}));var O=j,I=(s("8db8"),Object(p["a"])(O,x,P,!1,null,"463c0a54",null)),E=I.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Login"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"box"},[s("h1",[e._v("Login")]),s("p",{staticClass:"text-muted"},[e._v(" Please enter your Email and password!")]),s("input",{attrs:{type:"text",id:"email",placeholder:"Email"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginUser(),e.logInError=""}}}),s("input",{attrs:{type:"password",id:"pwd",placeholder:"Password"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginUser(),e.logInError=""}}}),""!=e.logInError?s("span",{staticClass:"text-danger"},[e._v(e._s(e.logInError))]):e._e(),s("button",{attrs:{type:"submit",id:"logIn",value:"Login"},on:{click:function(t){e.loginUser(),e.logInError=""}}},[e._v("Login")]),s("hr"),s("a",{staticClass:"text-muted",attrs:{href:"#"}},[s("u",{on:{click:function(t){e.showForgetPassword=!0}}},[e._v("Forgot password?")])]),s("br"),e._m(0)])])]),s("transition",{attrs:{name:"fade",appear:""}},[e.showForgetPassword?s("div",{staticClass:"modal-overlay"},[s("div",{staticClass:"popUp"},[s("div",{staticClass:"card-header"},[e._v(" Forget Password ")]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[e._v("Please Enter your Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"card-text",attrs:{type:"text",id:"email",placeholder:"Email"},domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("button",{staticClass:"button p-2 my-3",on:{click:e.sendResetPasswordEmail}},[e._v("Reset Password")]),s("br"),e.emailSent?s("span",{staticClass:"text-muted"},[e._v("Email Sent! Please Check Your Email")]):e._e(),e.emailError?s("span",{staticClass:"text-danger"},[e._v(e._s(e.errorMsg))]):e._e()]),s("hr"),s("button",{staticClass:"button px-4",on:{click:function(t){e.showForgetPassword=!1}}},[e._v("Close")])])]):e._e()])],1)])])},F=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"text-info",attrs:{href:"/register"}},[s("u",[e._v("Register")])])}],U={name:"Login",data:function(){return{showForgetPassword:!1,userEmail:"",emailSent:!1,emailError:!1,errorMsg:"",logInError:""}},components:{},methods:{loginUser:function(){var e=this,t=Object(l["b"])(),s=document.getElementById("email").value,a=document.getElementById("pwd").value;Object(l["e"])(t,s,a).then((function(e){var t=e.user;console.log(t),window.location.href="/"})).catch((function(t){console.log(t),e.logInError=t.message}))},sendResetPasswordEmail:function(){var e=this,t=Object(l["b"])();Object(l["d"])(t,this.userEmail).then((function(){e.emailSent=!0,setTimeout(0,3e3),e.showForgetPassword=!1})).catch((function(t){e.emailError=!0,e.errorMsg=t.message}))}},beforeCreate:function(){var e=Object(l["b"])();Object(l["c"])(e,(function(e){e?(console.log(e.email),window.location.href="/"):console.log("No user")}))}},M=U,D=(s("d6db"),Object(p["a"])(M,T,F,!1,null,null,null)),R=D.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid",attrs:{id:"app"}},[s("div",{staticClass:"row my-3"},[s("div",{staticClass:"col-12 text-light",attrs:{id:"joke"},on:{click:e.newJoke}},[s("marquee",{attrs:{behavior:"scroll",direction:"left"}},[e._v(e._s(e.apiContent.joke)),s("strong",[e._v(" (Click Me for New Jokes!)")])])],1)]),s("div",{staticClass:"row text-center justify-content-md-center"},[s("div",{staticClass:"col-xl-3 col-lg-3 order-lg-1 col-md-5 order-md-1",attrs:{id:"taskList"}},[s("div",{staticClass:"my-3"},[s("button",{staticClass:"button my-3",on:{click:function(t){e.showModal=!0}}},[e._v("New Task")]),s("transition",{attrs:{name:"fade",appear:""}},[e.showModal?s("div",{staticClass:"modal-overlay"},[s("div",{staticClass:"popUp"},[s("h3",[e._v("Add a New Task")]),s("hr"),s("div",{staticClass:"mb-4"},[s("label",{staticClass:"form-label",attrs:{for:"exampleFormControlInput1"}},[e._v("Description")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newTaskItem.newTaskDesc,expression:"newTaskItem.newTaskDesc"}],staticClass:"form-control",attrs:{type:"text",id:"",placeholder:"Task Description"},domProps:{value:e.newTaskItem.newTaskDesc},on:{input:function(t){t.target.composing||e.$set(e.newTaskItem,"newTaskDesc",t.target.value)}}})]),s("div",{staticClass:"mb-4"},[s("label",{staticClass:"form-label",attrs:{for:"exampleFormControlInput1"}},[e._v("Due Date")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newTaskItem.newTaskDueDate,expression:"newTaskItem.newTaskDueDate"}],staticClass:"form-control",attrs:{type:"date",id:""},domProps:{value:e.newTaskItem.newTaskDueDate},on:{input:function(t){t.target.composing||e.$set(e.newTaskItem,"newTaskDueDate",t.target.value)}}})]),s("div",{staticClass:"mb-4"},[s("label",{staticClass:"form-label",attrs:{for:"exampleFormControlInput1"}},[e._v("Time (Optional)")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newTaskItem.newTaskDueTime,expression:"newTaskItem.newTaskDueTime"}],staticClass:"form-control",attrs:{type:"time",id:""},domProps:{value:e.newTaskItem.newTaskDueTime},on:{input:function(t){t.target.composing||e.$set(e.newTaskItem,"newTaskDueTime",t.target.value)}}})]),e.newTaskError?s("p",{staticClass:"text-danger"},[e._v("The please provide the task description and the duedate !")]):e._e(),s("hr"),s("button",{staticClass:"button mx-3",on:{click:function(t){e.showModal=!1,e.newTaskError=!1}}},[e._v("Close")]),""!=e.newTaskItem.newTaskDueDate?s("button",{staticClass:"button mx-3",on:{click:e.addNewTask}},[e._v("Add Task")]):s("button",{staticClass:"button mx-3",on:{click:e.showNewTaskError}},[e._v("Add Task")])])]):e._e()])],1),s("h3",{staticClass:"text-light"},[e._v("Your Task List")]),s("hr",{staticClass:"border border-light"}),e._l(e.taskItem,(function(t,a){return s("div",{key:t.taskId},[s("div",{staticClass:"card mx-auto",staticStyle:{"max-width":"75%"},attrs:{id:"tasks"}},[s("div",{staticClass:"card-body text-secondary"},[s("p",{staticClass:"card-text"},[e._v(e._s(t.taskDesc))]),s("p",{staticClass:"card-text"},[e._v(e._s(t.taskDue))]),""!=t.taskTime?s("p",[e._v(e._s(t.taskTime))]):e._e(),s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return e.removeTask(a)}}},[e._v("Completed")])])])])}))],2),s("div",{staticClass:"col-xl-6 col-lg-5 order-lg-2 col-md-6 order-md-3"},[s("h1",{staticClass:"text-light"},[e._v("SCIS Reddit Community")]),s("div",{staticClass:"bg-white p-3 rounded-3 bg-opacity-75"},[s("div",{staticClass:"form-group text-start mt-3"},[s("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Share your thoughts")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.postMessage,expression:"postMessage"}],staticClass:"form-control mt-1",attrs:{type:"text",placeholder:"Type here..."},domProps:{value:e.postMessage},on:{input:function(t){t.target.composing||(e.postMessage=t.target.value)}}}),s("img",{staticClass:"my-2",staticStyle:{dispay:"none"},attrs:{id:"myimg",src:"",alt:""}}),s("button",{staticClass:"btn btn-secondary mt-2",attrs:{type:"button"},on:{click:e.selectImg}},[e._v("Upload Photo")]),e.photoPath?s("button",{staticClass:"btn btn-secondary mx-2 mt-2",attrs:{type:"button"},on:{click:e.removePhoto}},[e._v("Remove Photo")]):e._e(),s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"hiddenSelectImg"}}),s("br"),s("small",[e._v("Note: Photo file size must be smaller than 2mb !!!")])]),s("hr"),e.noPublishContent?s("p",[s("small",{staticClass:"text-danger"},[e._v("Please share your thoughts...")])]):e._e(),""==e.postMessage.trim()?s("button",{staticClass:"button ",on:{click:function(t){e.noPublishContent=!0}}},[e._v("Publish")]):s("button",{staticClass:"button ",on:{click:function(t){e.publishPost(),e.noPublishContent=!1}}},[e._v("Publish")])]),e.allPost!=[]?s("div",{staticClass:"card mb-3 rounded-5"},e._l(e.allPost,(function(t,a){return s("div",{key:a,staticClass:"bg-white p-3 rounded-3 my-2 bg-opacity-75"},[s("div",{staticClass:"card-body text-start"},[t.email!=e.user.email?s("h5",{staticClass:"card-title"},[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:t.profilePic,alt:"Chris Wood",width:"40",height:"40"}}),e._v(e._s(t.username))]):s("h5",{staticClass:"card-title"},[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:e.user.profilePic,alt:"Chris Wood",width:"40",height:"40"}}),e._v("My post")]),""!=t.downloadUrl?s("img",{staticClass:"card-img-top mb-3",attrs:{src:t.downloadUrl,alt:"..."}}):e._e(),s("p",{staticClass:"card-text"},[e._v(e._s(t.postMessage))]),s("p",{staticClass:"card-text"},[s("small",{staticClass:"text-muted"},[e._v("Published on: "+e._s(t.date.toString()))])]),e._l(t.comments,(function(t,a){return s("ul",{key:a,staticClass:"list-group"},[s("li",{staticClass:"list-group-item"},[e._v(e._s(t))])])}))],2),s("div",{staticClass:"input-group mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newComment,expression:"newComment"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Your Comment..."},domProps:{value:e.newComment},on:{input:function(t){t.target.composing||(e.newComment=t.target.value)}}}),s("div",{staticClass:"input-group-append"},[""!=e.newComment.trim()?s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.processComment(a)}}},[e._v("Comment")]):s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",disabled:""}},[e._v("Comment")])])])])})),0):e._e()]),s("div",{staticClass:"col-xl-3 col-lg-4 order-lg-3 col-md-5 order-md-2",attrs:{id:"friendlisthide"}},[s("div",{staticClass:"container d-flex justify-content-center align-items-center"},[s("div",{staticClass:"card bg-white bg-opacity-75 px-5 py-2 mx-2 w-100"},[s("div",{staticClass:"text-center"},[null!=e.user?s("h4",{staticClass:"my-1"},[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:e.user.profilePic,alt:"Chris Wood",width:"40",height:"40"}}),e._v(" "+e._s(e.user.username))]):e._e(),s("button",{staticClass:"button p-2",on:{click:function(t){e.showProfile=!0}}},[e._v("Profile")]),s("div",{staticClass:"justify-content-between align-items-center mt-4 px-4 w-100"},[s("div",[s("h6",[e._v("Tasks: "+e._s(e.taskItem.length))]),s("h6",[e._v("Friends: "+e._s(e.myFriends.length)+" Request: "+e._s(e.myFriendRequest.length))])])]),s("transition",{attrs:{name:"fade",appear:""}},[e.showProfile?s("div",{staticClass:"modal-overlay"},[s("div",{staticClass:"popUp"},[s("div",{staticClass:"card-header"},[e._v(" Profile ")]),0==e.edit?s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[e._v(e._s(e.user.email))]),s("p",{staticClass:"card-text"},[e._v(e._s(e.user.username))])]):s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[e._v(e._s(e.user.email))]),s("hr"),e._v(" Username : "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUsername,expression:"newUsername"}],staticClass:"card-text mb-2",domProps:{value:e.newUsername},on:{input:function(t){t.target.composing||(e.newUsername=t.target.value)}}}),s("br"),e.newUsernameError?s("span",{staticClass:"text-danger"},[e._v("Invalid username")]):e._e(),s("p",[e._v("Profile Picture")]),e._l(e.photoLink,(function(t,a){return s("img",{key:a,staticClass:"editProfile rounded-circle mx-1 mt-0",attrs:{src:t,alt:"Chris Wood",width:"40",height:"40"},on:{click:function(s){e.selectedImg=t}}})})),s("br"),""!=e.selectedImg?s("div",[s("h5",[e._v("New Profile Picture")]),s("img",{staticClass:"rounded-circle my-1",attrs:{src:e.selectedImg,alt:"Chris Wood",width:"40",height:"40"}})]):e._e(),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.updateUsername}},[e._v("Update")]),s("hr"),e._v(" Change Password (Optional) "),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPw,expression:"oldPw"}],staticClass:"my-2",attrs:{type:"password",placeholder:"Old Password"},domProps:{value:e.oldPw},on:{input:function(t){t.target.composing||(e.oldPw=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPw,expression:"newPw"}],staticClass:"mb-2",attrs:{type:"password",placeholder:"New Password"},domProps:{value:e.newPw},on:{input:function(t){t.target.composing||(e.newPw=t.target.value)}}}),s("br"),e.updatePasswordError?s("span",{staticClass:"text-danger"},[e._v("Wrong Password")]):e._e(),s("br"),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.changePassword}},[e._v("Change Password")])],2),s("hr"),s("button",{staticClass:"button px-4 mx-4",on:{click:function(t){e.edit=!0}}},[e._v("Edit")]),s("button",{staticClass:"button px-4 mx-4",on:{click:function(t){e.showProfile=!1,e.newUsernameError=!1,e.updatePasswordError=!1}}},[e._v("Close")])])]):e._e()])],1)])]),s("h3",{staticClass:"text-light fw-bold"},[e._v("Friends")]),s("hr",{staticClass:"border border-light"}),0!=e.myFriends.length?s("ul",{staticClass:"list-group"},e._l(e.myFriends,(function(t,a){return s("li",{key:a,staticClass:"list-group-item list-group-item-info text-start",attrs:{id:"listfriend"},on:{click:function(s){e.showFriendInfo=!0,e.getFriendInfo(t)}}},[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:t.profilePic,alt:"Chris Wood",width:"40",height:"40"}}),e._v(" "+e._s(t.username))])})),0):s("p",{staticClass:"text-light"},[e._v("Add your first friend!")]),s("transition",{attrs:{name:"fade",appear:""}},[e.showFriendInfo?s("div",{staticClass:"modal-overlay"},[s("div",{staticClass:"popUp"},[s("div",{staticClass:"card-header"},[e._v(" Friend Info ")]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[e._v(e._s(e.friendInfo.username))]),s("p",{staticClass:"card-text"},[e._v(e._s(e.friendInfo.email))]),s("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button"},on:{click:e.toMessage}},[e._v("Message")]),s("button",{staticClass:"btn btn-outline-danger m-1",attrs:{type:"button"},on:{click:function(t){e.deleteFriend(e.friendInfo),e.friendInfo=null,e.showFriendInfo=!1}}},[e._v("Delete")])]),s("hr"),s("button",{staticClass:"button mx-3",on:{click:function(t){e.showFriendInfo=!1}}},[e._v("Close")])])]):e._e()]),s("hr",{staticClass:"border border-light"}),s("p",{staticClass:"text-light fw-bold"},[e._v("Friend Request")]),0!=e.myFriendRequest.length?s("ul",{staticClass:"list-group"},e._l(e.myFriendRequest,(function(t,a){return s("li",{key:a,staticClass:"list-group-item list-group-item-info"},[e._v(e._s(t.username)+" "),s("br"),s("button",{staticClass:"btn btn-outline-danger m-1",attrs:{type:"button"},on:{click:function(s){return e.processFriendRequest(t,a,!1)}}},[e._v("Reject")]),s("button",{staticClass:"btn btn-outline-success m-1",attrs:{type:"button"},on:{click:function(s){return e.processFriendRequest(t,a,!0)}}},[e._v("Accept")])])})),0):s("p",{staticClass:"text-light"},[e._v("No request...")]),s("hr",{staticClass:"border border-light"}),s("button",{staticClass:"button my-3",on:{click:function(t){e.showSearchFriend=!0}}},[e._v("New Friend")]),s("transition",{attrs:{name:"fade",appear:""}},[e.showSearchFriend?s("div",{staticClass:"modal-overlay"},[s("div",{staticClass:"popUp"},[s("h3",{staticClass:"text-dark"},[e._v("Search for a Friend")]),s("hr"),s("div",{staticClass:"input-group mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchEmail,expression:"searchEmail"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter an email"},domProps:{value:e.searchEmail},on:{input:function(t){t.target.composing||(e.searchEmail=t.target.value)}}}),s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon2"},on:{click:e.findUser}},[e._v("Search")])]),null!=e.searchUser&&0!=e.searchUser?s("div",{staticClass:"card"},[s("hr"),s("div",{staticClass:"card-header"},[e._v(" Result ")]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[e._v(e._s(e.searchUser.username))]),s("p",{staticClass:"card-text"},[e._v(e._s(e.searchUser.email))]),e.searchUser.email==e.user.email?s("button",{staticClass:"button mx-3",attrs:{disabled:""}},[e._v("Yourself")]):0!=e.myFriends.filter((function(t,s){return t.email==e.searchUser.email})).length?s("button",{staticClass:"btn btn-outline-danger m-3",on:{click:function(t){return e.deleteFriend(e.searchUser)}}},[e._v("Delete Friend")]):s("button",{staticClass:"button mx-3",on:{click:e.sendFriendRequest}},[e._v("Add Friend")])])]):e._e(),0==e.searchUser?s("p",[e._v("No such user...")]):e._e(),s("hr"),s("button",{staticClass:"button mx-3",on:{click:function(t){e.showSearchFriend=!1,e.searchUser=null,e.searchEmail=""}}},[e._v("Close")])])]):e._e()])],1)])])},N=[],B=s("1da1"),q=s("b85c"),L=(s("96cf"),s("4de4"),s("07ac"),s("b0c0"),s("498a"),s("159b"),s("e71f")),$=s("588e"),A=s("bc3a"),W=s.n(A),H={name:"app",data:function(){return{taskItem:[],newTaskItem:{newTaskDesc:"",newTaskDueDate:"",newTaskDueTime:""},showModal:!1,showSearchFriend:!1,showFriendInfo:!1,showProfile:!1,searchEmail:"",searchUser:null,newTaskError:!1,myFriends:[],myFriendRequest:[],friendInfo:null,photoLink:["https://bootdey.com/img/Content/avatar/avatar1.png","https://bootdey.com/img/Content/avatar/avatar2.png","https://bootdey.com/img/Content/avatar/avatar3.png","https://bootdey.com/img/Content/avatar/avatar4.png","https://bootdey.com/img/Content/avatar/avatar5.png","https://bootdey.com/img/Content/avatar/avatar6.png","https://bootdey.com/img/Content/avatar/avatar7.png","https://bootdey.com/img/Content/avatar/avatar8.png"],user:null,photoPath:null,postMessage:"",allPost:[],myPost:0,pictUrl:"",noPublishContent:!1,newComment:"",edit:!1,saveBtn:!1,oldPw:"",newPw:"",newUsername:"",newUsernameError:!1,updatePasswordError:!1,selectedImg:"",apiContent:""}},components:{},methods:{addNewTask:function(){var e=this;console.log(this.newTaskItem);var t={taskDesc:this.newTaskItem.newTaskDesc,taskDue:this.newTaskItem.newTaskDueDate,taskTime:this.newTaskItem.newTaskDueTime};this.taskItem.push(t),this.showModal=!1;var s=Object.assign({},this.taskItem),a=V(this.userUid,s);a.then((function(){console.log("Success"),e.newTaskItem.newTaskDesc="",e.newTaskItem.newTaskDueDate="",e.newTaskItem.newTaskDueTime="",e.newTaskError=!1}))},removeTask:function(e){var t=this;this.taskItem=this.taskItem.filter((function(t,s){return s!=e}));var s=Object.assign({},this.taskItem),a=V(this.userUid,s);a.then((function(){console.log("Success"),t.newTaskItem.newTaskDesc="",t.newTaskItem.newTaskDueDate="",t.newTaskItem.newTaskDueTime="",t.newTaskError=!1}))},showNewTaskError:function(){this.newTaskError=!0},findUser:function(){var e=this;console.log(this.searchEmail);var t=Y(this.searchEmail);t.then((function(t){e.searchUser=t||!1}))},sendFriendRequest:function(){var e=this,t=[],s=J(this.searchUser.uid,"friendrequest");s.then((function(s){if(null!=s)if(0!=s.length){s=Object.values(s),console.log(s);var a,n=Object(q["a"])(s);try{for(n.s();!(a=n.n()).done;){var r=a.value,i={uid:r.uid,email:r.email,username:r.username};t.push(i)}}catch(l){n.e(l)}finally{n.f()}t.push(e.user)}else t.push(e.user),console.log("No request");else t.push(e.user),console.log("No request list");var o=Z(t,e.searchUser);o.then((function(){console.log("friend request send")}))}))},processFriendRequest:function(e,t,s){var a=this;this.myFriendRequest=this.myFriendRequest.filter((function(e,s){return s!=t}));var n=Z(this.myFriendRequest,this.user);n.then((function(){if(1==s){console.log("Friend Request accepted !"),a.myFriends.push(e);var t=Q(a.user.uid,a.myFriends);t.then((function(){console.log("Friend list updated!")}));var n=[],r=J(e.uid,"friends");r.then((function(s){if(null!=s)if(0!=s.length){s=Object.values(s);var r,i=Object(q["a"])(s);try{for(i.s();!(r=i.n()).done;){var o=r.value,l={uid:o.uid,email:o.email,username:o.username,profilePic:o.profilePic};n.push(l)}}catch(c){i.e(c)}finally{i.f()}n.push(a.user)}else n.push(a.user),console.log("No Friends");else n.push(a.user),console.log("No Friendlist");t=Q(e.uid,n),t.then((function(){console.log("Friend list updated!")}))}))}else console.log("Friend Request rejected !")}))},deleteFriend:function(e){var t=this;this.myFriends=this.myFriends.filter((function(t){return t.email!=e.email}));var s=Q(this.user.uid,this.myFriends);s.then((function(){console.log("Friend list updated!");var s=[],a=J(e.uid,"friends");a.then((function(a){if(null!=a&&0!=a.length){a=Object.values(a);var n,r=Object(q["a"])(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.email!=t.user.email){var o={uid:i.uid,email:i.email,username:i.username};s.push(o)}}}catch(c){r.e(c)}finally{r.f()}}var l=Q(e.uid,s);l.then((function(){console.log("Friend list updated!")}))}))}))},getFriendInfo:function(e){this.friendInfo=e},selectImg:function(){var e=this,t=document.getElementById("hiddenSelectImg");t.onchange=function(t){var s=t.target.files,a=new FileReader;a.onload=function(){document.getElementById("myimg").src=a.result,document.getElementById("myimg").style="display:block;height:100px;width:100px; border:1px solid black"},e.photoPath=s[0],a.readAsDataURL(s[0])},t.click()},publishPost:function(){var e=this,t="",s=Object($["b"])();if(null!=this.photoPath){t="images/"+this.photoPath.name;var a=Object($["c"])(s,t);Object($["d"])(a,this.photoPath).then((function(e){console.log(e)}))}var n=Object($["a"])(Object($["c"])(s,t));n.then((function(t){var s={downloadUrl:t,postMessage:e.postMessage,uid:e.user.uid,email:e.user.email,username:e.user.username,date:(new Date).toDateString(),comments:[],profilePic:e.user.profilePic};e.processPublish(s)})).catch((function(){var t={downloadUrl:"",postMessage:e.postMessage,uid:e.user.uid,email:e.user.email,username:e.user.username,date:(new Date).toDateString(),comments:[],profilePic:e.user.profilePic};e.processPublish(t)}))},removePhoto:function(){this.photoPath=null,this.pictUrl="",document.getElementById("myimg").src="",document.getElementById("myimg").style="display:none;"},processPublish:function(e){var t=[],s=J("allpost","post");s.then((function(s){if(null!=s)if(0!=s.length){s=Object.values(s);var a,n=Object(q["a"])(s);try{for(n.s();!(a=n.n()).done;){var r=a.value,i={downloadUrl:r.downloadUrl,postMessage:r.postMessage,uid:r.uid,email:r.email,username:r.username,date:r.date,profilePic:r.profilePic};t.push(i)}}catch(l){n.e(l)}finally{n.f()}}else console.log("No Friends");else console.log("No Friendlist");t.push(e);var o=te(t);o.then((function(){console.log("Post Updated")}))})),this.photoPath=null,this.postMessage="",this.pictUrl="",document.getElementById("myimg").src="",document.getElementById("myimg").style="display:none;"},processComment:function(e){this.allPost[e].comments.push(this.newComment);var t=this.allPost;te(t).then((function(){console.log("Comment updated")})),this.newComment=""},updateUsername:function(){var e=this;this.newUsernameError=!1;var t=Object(L["d"])(),s=Object(L["b"])(t,"users",this.user.uid);if(""==this.newUsername.trim())return""!=this.selectedImg?void Object(L["f"])(s,{profilePic:this.selectedImg},{merge:!0}).then((function(){console.log("Username updated"),e.user.profilePic=e.selectedImg,e.selectedImg="",e.showProfile=!1})):void(this.newUsernameError=!0);Object(L["f"])(s,{username:this.newUsername},{merge:!0}).then((function(){console.log("Username updated"),e.user.username=e.newUsername,e.newUsername="",e.showProfile=!1}))},changePassword:function(){var e=this,t=Object(l["b"])();Object(l["e"])(t,this.user.email,this.oldPw).then((function(){var s=t.currentUser;Object(l["g"])(s,e.newPw).then((function(){console.log("Password updated"),e.newPw="",e.oldPw=""}))})).catch((function(){e.updatePasswordError=!0,e.newPw="",e.oldPw=""}))},toMessage:function(){window.location.href="/Messages"},newJoke:function(){var e=this;W.a.get("https://geek-jokes.sameerkumar.website/api?format=json").then((function(t){e.apiContent=t.data})).catch((function(t){e.apiContent=t}))}},beforeCreate:function(){var e=this,t=Object(l["b"])();Object(l["c"])(t,(function(t){if(t){var s=Y(t.email);s.then((function(t){e.user=t})),e.userUid=t.uid;var a=J(e.userUid,"tasklist");a.then((function(t){if(null!=t)if(0!=t.length){t=Object.values(t);var s,a=Object(q["a"])(t);try{for(a.s();!(s=a.n()).done;){var n=s.value,r={taskDesc:n.taskDesc,taskDue:n.taskDue,taskTime:n.taskTime};e.taskItem.push(r)}}catch(i){a.e(i)}finally{a.f()}}else console.log("No Item");else console.log("no task yet")})),a=J("allpost","post"),a.then((function(t){if(null!=t)if(0!=t.length){t=Object.values(t);var s,a=Object(q["a"])(t);try{for(a.s();!(s=a.n()).done;){var n=s.value,r=[];null!=n.comments&&(r=Object.values(n.comments));var i={downloadUrl:n.downloadUrl,postMessage:n.postMessage,uid:n.uid,email:n.email,username:n.username,date:n.date,comments:r,profilePic:n.profilePic};e.allPost.unshift(i)}}catch(o){a.e(o)}finally{a.f()}}else console.log("No Post");else console.log("No post list")}));var n=Object(L["d"])();Object(L["e"])(Object(L["b"])(n,"friends",t.uid),(function(t){if(t.data()){e.myFriends=[];var s,a=t.data().myFriends,n=Object(q["a"])(a);try{for(n.s();!(s=n.n()).done;){var r=s.value;Y(r.email).then((function(t){e.myFriends.push(t)}))}}catch(i){n.e(i)}finally{n.f()}}})),Object(L["e"])(Object(L["b"])(n,"friendrequest",t.uid),(function(t){if(t.data()){e.myFriendRequest=[];var s,a=t.data().request,n=Object(q["a"])(a);try{for(n.s();!(s=n.n()).done;){var r=s.value;Y(r.email).then((function(t){e.myFriendRequest.push(t)}))}}catch(i){n.e(i)}finally{n.f()}}})),Object(L["e"])(Object(L["b"])(n,"post","allpost"),(function(t){if(0!=t.data().allPostItems.length)if(e.allPost.length!=t.data().allPostItems.length){var s=t.data().allPostItems.pop();e.allPost.unshift(s)}else e.allPost=t.data().allPostItems})),document.getElementById("joke").click()}else console.log("No user"),window.location.href="/login"}))}};function Y(e){return G.apply(this,arguments)}function G(){return G=Object(B["a"])(regeneratorRuntime.mark((function e(t){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(L["d"])(),e.next=3,Object(L["c"])(Object(L["a"])(s,"users"));case 3:return n=e.sent,n.forEach((function(e){e.data().email==t&&(a={uid:e.id,email:e.data().email,username:e.data().username,profilePic:e.data().profilePic})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function J(e,t){return z.apply(this,arguments)}function z(){return z=Object(B["a"])(regeneratorRuntime.mark((function e(t,s){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(L["d"])(),n=null,e.next=4,Object(L["c"])(Object(L["a"])(a,s));case 4:if(r=e.sent,r.forEach((function(e){e.id==t&&(n=e.data())})),null==n||0==Object.values(n).length){e.next=24;break}if("tasklist"!=s){e.next=11;break}return e.abrupt("return",Object.values(n.taskItem));case 11:if("friends"!=s){e.next=16;break}return console.log(n+"Imhere!"),e.abrupt("return",Object.values(n.myFriends));case 16:if("friendrequest"!=s){e.next=20;break}return e.abrupt("return",Object.values(n.request));case 20:if("post"!=s){e.next=22;break}return e.abrupt("return",Object.values(n.allPostItems));case 22:e.next=25;break;case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function V(e,t){return K.apply(this,arguments)}function K(){return K=Object(B["a"])(regeneratorRuntime.mark((function e(t,s){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(L["d"])(),console.log(s),e.next=4,Object(L["f"])(Object(L["b"])(a,"tasklist",t),{taskItem:s});case 4:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function Q(e,t){return X.apply(this,arguments)}function X(){return X=Object(B["a"])(regeneratorRuntime.mark((function e(t,s){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(L["d"])(),console.log(s),e.next=4,Object(L["f"])(Object(L["b"])(a,"friends",t),{myFriends:s});case 4:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return ee=Object(B["a"])(regeneratorRuntime.mark((function e(t,s){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(L["d"])(),console.log(s),e.next=4,Object(L["f"])(Object(L["b"])(a,"friendrequest",s.uid),{request:t});case 4:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return se.apply(this,arguments)}function se(){return se=Object(B["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(L["d"])(),console.log(t),e.next=4,Object(L["f"])(Object(L["b"])(s,"post","allpost"),{allPostItems:t});case 4:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}var ae=H,ne=(s("5a95"),Object(p["a"])(ae,S,N,!1,null,null,null)),re=ne.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"register"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"box"},[s("h1",[e._v("Register")]),s("p",{staticClass:"text-muted"},[e._v(" Please enter your Email and password!")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username(Optional)"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),null!=e.error?s("p",{staticStyle:{color:"red"}},[e._v(e._s(e.error))]):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.cPassword,expression:"cPassword"}],attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:e.cPassword},on:{input:function(t){t.target.composing||(e.cPassword=t.target.value)}}}),e.password!=e.cPassword?s("p",{staticStyle:{color:"red"}},[e._v("Password does not match")]):e._e(),e.password==e.cPassword?s("button",{attrs:{type:"submit"},on:{click:e.registerNewUser}},[e._v("Register")]):e._e(),s("hr"),e._m(0)])])])])])])},oe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"text-muted"},[e._v(" Have an account? "),s("a",{staticClass:"text-reset",attrs:{href:"login.html"}},[e._v("LogIn")]),e._v(". ")])}],le={name:"register",data:function(){return{email:"",password:"",cPassword:"",username:"",error:null}},components:{},methods:{registerNewUser:function(){var e=this;""==this.username&&(this.username=this.email);var t=Object(l["b"])();Object(l["a"])(t,this.email,this.password).then((function(t){var s=t.user;console.log(s.uid),e.error=null;var a=Object(L["d"])();try{Object(L["f"])(Object(L["b"])(a,"users",s.uid),{email:e.email,username:e.username,profilePic:"https://bootdey.com/img/Content/avatar/avatar1.png"}).then((function(){console.log("UserCreated")}))}catch(n){console.error("Error adding document: ",n)}e.email="",e.password="",e.cPassword="",e.username="",setTimeout((function(){return e.$router.push({path:"/login"})}),3e3)})).catch((function(t){var s=t.code,a=t.message;e.error=s,console.log(s),console.log(a)}))}},compute:{}},ce=le,ue=Object(p["a"])(ce,ie,oe,!1,null,null,null),de=ue.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container p-0",staticStyle:{width:"75%"},attrs:{id:"app"}},[s("div",{staticClass:"card m-3"},[s("div",{staticClass:"row g-0"},[s("div",{staticClass:"chat-messages col-12 col-lg-5 col-xl-3 border bg-light"},[e._m(0),e._l(e.myFriends,(function(t,a){return s("a",{key:a,staticClass:"list-group-item list-group-item-action border"},[s("div",{staticClass:"d-flex align-items-start"},[s("div",{staticClass:"flex-grow-1 ml-3 text-start",on:{click:function(s){return e.getMessage(t)}}},[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:t.profilePic,alt:"Chris Wood",width:"40",height:"40"}}),e._v(e._s(t.username)+" ")])])])})),s("hr",{staticClass:"d-block d-lg-none mt-1 mb-0"})],2),s("div",{staticClass:"col-12 col-lg-7 col-xl-9 bg-light",staticStyle:{height:"600px"}},[s("div",{staticClass:"py-2 px-4 border-bottom d-none d-lg-block"},[s("div",{staticClass:"d-flex align-items-center py-1"},[s("div",{staticClass:"flex-grow-1 pl-3"},[null!=e.currentChatFriend?s("strong",[e._v(e._s(e.currentChatFriend.username))]):e._e()])])]),s("div",{staticClass:"chat-messages",staticStyle:{height:"500px"},attrs:{id:"chatHistory"},on:{click:e.scrollToBottom}},e._l(e.showMessage,(function(t,a){return s("div",{key:a,staticClass:"position-relative"},[s("div",{staticClass:"chat-messages p-4"},[t.sender==e.user.uid?s("div",{staticClass:"chat-message-right pb-4"},[s("div",[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:e.user.profilePic,alt:"Chris Wood",width:"40",height:"40"}}),s("br"),s("small",{staticClass:"text-muted small text-nowrap mt-2 text-end"},[e._v(e._s(t.date))])]),s("div",{staticClass:"flex-shrink-1 bg-primary text-light rounded px-2 mr-3 w-50 h-50"},[s("div",{staticClass:" font-weight-bold text-end"},[e._v("You")]),s("p",{staticClass:"text-start"},[e._v(e._s(t.message))])])]):s("div",{staticClass:"chat-message-left pb-4"},[s("div",[s("img",{staticClass:"rounded-circle mr-1",attrs:{src:e.currentChatFriend.profilePic,alt:"Sharon Lessman",width:"40",height:"40"}}),s("br"),s("small",{staticClass:"text-muted small text-nowrap mt-2 text-start"},[e._v(e._s(t.date))])]),s("div",{staticClass:"flex-shrink-1 bg-success text-light rounded px-2 ml-3 w-50"},[s("div",{staticClass:" font-weight-bold text-start"},[e._v(e._s(e.currentChatFriend.username))]),s("p",{staticClass:"text-start"},[e._v(e._s(t.message))])])])])])})),0)]),null!=e.currentChatFriend?s("div",{staticClass:"flex-grow-0 py-3 px-4 border-top bg-light"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputMessage,expression:"inputMessage"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Type your message"},domProps:{value:e.inputMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.inputMessage=t.target.value)}}}),""==e.inputMessage.trim()?s("button",{staticClass:"btn btn-primary",attrs:{disabled:""}},[e._v("Send")]):s("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.sendMessage()}}},[e._v("Send")])])]):e._e()])])])},pe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"px-4 d-none d-md-block"},[s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticClass:"flex-grow-1"},[s("p",[e._v("Chats")])])])])}],he=s("0829"),fe={name:"app",data:function(){return{user:{uid:"",email:"",username:"",profilePic:""},myFriends:[],inputMessage:"",showMessage:[],currentChatFriend:null}},methods:{getMessage:function(e){var t=this;this.showMessage=[],this.currentChatFriend=e;var s=Object(he["d"])();console.log(this.user.uid),Object(he["e"])(Object(he["b"])(s,"messages",this.user.uid+e.uid),(function(e){console.log("Current Data: ",e.data()),e.data()&&(t.showMessage=e.data().chats,setTimeout(t.scrollToBottom,1e3))}))},sendMessage:function(){var e=this;if(""!=this.inputMessage.trim()){var t=[],s={sender:this.user.uid,message:this.inputMessage,date:(new Date).toDateString()};console.log("New message:",s);var a=ve(this.user.uid+this.currentChatFriend.uid,"messages");a.then((function(a){if(null!=a)if(0!=a.length){a=Object.values(a);var n,r=Object(q["a"])(a);try{for(r.s();!(n=r.n()).done;){var i=n.value,o={sender:i.sender,message:i.message,date:i.date};t.push(o)}}catch(c){r.e(c)}finally{r.f()}}else console.log("No chat");else console.log("No chat list");t.push(s);var l=be(e.currentChatFriend,e.user,t);l.then((function(){console.log("chat updated");var s=be(e.user,e.currentChatFriend,t);s.then((function(){console.log("friend chat updated"),e.inputMessage=""}))}))}))}},scrollToBottom:function(){var e=document.getElementById("chatHistory");e.scrollTop=e.scrollHeight}},beforeCreate:function(){var e=this,t=Object(l["b"])();Object(l["c"])(t,(function(t){if(t){ye(t.email).then((function(t){e.user=t}));var s=ve(t.uid,"friends");s.then((function(t){if(null!=t)if(0!=t.length){t=Object.values(t);var s,a=Object(q["a"])(t);try{for(a.s();!(s=a.n()).done;){var n=s.value;ye(n.email).then((function(t){var s={uid:t.uid,email:t.email,username:t.username,profilePic:t.profilePic};e.myFriends.push(s)}))}}catch(r){a.e(r)}finally{a.f()}}else console.log("No Friends");else console.log("No Friendlist")}))}else console.log("No user"),window.location.href="/login"}))}};function ve(e,t){return ge.apply(this,arguments)}function ge(){return ge=Object(B["a"])(regeneratorRuntime.mark((function e(t,s){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(he["d"])(),n=null,e.next=4,Object(he["c"])(Object(he["a"])(a,s));case 4:if(r=e.sent,r.forEach((function(e){e.id==t&&(n=e.data())})),null==n||0==Object.values(n).length){e.next=15;break}if("friends"!=s){e.next=11;break}return e.abrupt("return",Object.values(n.myFriends));case 11:if("messages"!=s){e.next=13;break}return e.abrupt("return",Object.values(n.chats));case 13:e.next=16;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}function be(e,t,s){return we.apply(this,arguments)}function we(){return we=Object(B["a"])(regeneratorRuntime.mark((function e(t,s,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(he["d"])(),console.log(a),e.next=4,Object(he["f"])(Object(he["b"])(n,"messages",s.uid+t.uid),{chats:a});case 4:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function ye(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(B["a"])(regeneratorRuntime.mark((function e(t){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(he["d"])(),e.next=3,Object(he["c"])(Object(he["a"])(s,"users"));case 3:return n=e.sent,n.forEach((function(e){e.data().email==t&&(a={uid:e.id,email:e.data().email,username:e.data().username,profilePic:e.data().profilePic})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}var ke=fe,_e=(s("0995"),Object(p["a"])(ke,me,pe,!1,null,null,null)),xe=_e.exports;a["default"].use(_["a"]);var Pe=[{path:"/",name:"Home",component:E},{path:"/Login",name:"Login",component:R},{path:"/Community",name:"Community",component:re},{path:"/Register",name:"Register",component:de},{path:"/Messages",name:"Messages",component:xe}],je=new _["a"]({mode:"history",base:"/",routes:Pe}),Oe=je,Ie={apiKey:"AIzaSyARuBWfojO1-x5xgQ7aV0VVG6a1T0G1vt4",authDomain:"wadproject-e347d.firebaseapp.com",projectId:"wadproject-e347d",storageBucket:"wadproject-e347d.appspot.com",messagingSenderId:"401322032845",appId:"1:401322032845:web:17138ae790a63c1d85b384",measurementId:"G-1CP5Y8HXTD"};if(!Ie.apiKey)throw new Error("Missing firebase credential: apikey");if(!Ie.authDomain)throw new Error("Missing firebase credential: authDomain");if(!Ie.projectId)throw new Error("Missing firebase credential: projectId");if(!Ie.storageBucket)throw new Error("Missing firebase credential: storageBucket");if(!Ie.messagingSenderId)throw new Error("Missing firebase credential: messagingSenderId");if(!Ie.appId)throw new Error("Missing firebase credential: appId");if(!Ie.measurementId)throw new Error("Missing firebase credential: measurementId");a["default"].config.productionTip=!1,a["default"].use(y["a"]),a["default"].use(C["a"]);var Ee=Object(k["a"])(Ie);Ee&&console.log("Db initialized"),new a["default"]({render:function(e){return e(w)},router:Oe}).$mount("#app")},"5a95":function(e,t,s){"use strict";s("ac49")},"85ec":function(e,t,s){},"8db8":function(e,t,s){"use strict";s("2941")},ac49:function(e,t,s){},cbbb:function(e,t,s){},d6db:function(e,t,s){"use strict";s("e67a")},e67a:function(e,t,s){}});
//# sourceMappingURL=app.622ba783.js.map