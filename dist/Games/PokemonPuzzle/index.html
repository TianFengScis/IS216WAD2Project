<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pokemon Puzzle</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" 
        crossorigin="anonymous">

    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <link rel="icon" href="../../icon_smu.png">
    
</head> 
    
    <body>
        <!--Game navigation button-->
        <div class="container-fluid" >
          <div class="row text" style="margin-top: 10px ;" >
              <div class="col-sm">
              </div>
              <div class="col-sm">
                <a href="/Community"><button type="button" class="btn btn-light" >Back To Website</button></a>
              </div>
              <div class="col-sm">
                <a href="../Dodge the Anchor/ss.html"><button type="button" class="btn btn-warning" >Anchor Dodge</button></a>
              </div>
              <div class="col-sm">
                <a href="../JumpBox/game.html"><button type="button" class="btn btn-warning" >Box Jump</button></a>
              </div>
              <div class="col-sm">
                <a href="index.html"><button type="button" class="btn btn-success">Pokemon Puzzle</button></a>
              </div>
              <div class="col-sm">
                <a href="../FlappyBird/game.html"><button type="button" class="btn btn-warning">Flappy Bird</button></a>
              </div>
              <div class="col-sm">
              </div>
            </div>

            </div>
        <!--Game Name-->
        <div class="row text maxed" style="background-color: #212121; width: 300px;">
            <h1>Pokemon Puzzle</h1>
          </div>

        <!--Game Body-->
          <div class="container-fluid text" >
            <div class="gameBody"> 
              
                  
<div class="container-fluid" style="background-image: url('img/background.png');background-repeat: no-repeat;background-size:cover; text-align: center;">
    
 

  <button id="pokebtn" type="button"  class="btn btn-danger btn-lg mt-5" onclick="getPoke()" >Gotta Catch'Em All</button>
  


<div id="puzzle-wrapper">
  <div>
      <h1 id="name" class="text-white my-5 bg-info"></h1>
      
  </div>
  
</div>
<!-- Modal -->
<div class="row text-white bg-danger" id="success-modal" style="display:none">
  <h1>Good Job!</h1>
  <h1 id="score"></h1>
</div>
<div class="row">
  <div class="col"></div>
  <div class="col-4">
<a id="retrybtn" role="button" class="btn btn-warning btn-lg m-5" href="." style="display:none">Retry?</a>
</div>
<div class="col"></div>
</div>

<script>
  
  function getPoke(){
      document.getElementById("retrybtn").style.display="block";
      document.getElementById("pokebtn").style.display="none";
  const q=Math.floor(Math.random()*151);
  var url= "https://pokeapi.co/api/v2/pokemon/"+encodeURIComponent(q)+"/";
  
  axios.get(url,{
      params: {
          q: q 
      }
  }
      )
      .then(response=>{
          
          console.log(response)
          var name=response.data.name.toUpperCase();
          var ele=document.getElementById("name");
          ele.innerText=name;
      const picturePuzzle = new PicturePuzzle(
      document.querySelectorAll('#puzzle-wrapper > div')[0],
      'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/'+q+'.png',
      600
      );

      var score=0;
      picturePuzzle.onSwap = function(movements){
          score+=1;
      };

      const modal = document.querySelector('#success-modal');


      picturePuzzle.onFinished = function() {
          modal.style.display = 'block';
          document.getElementById("score").innerHTML="You have made a total of "+score+" swaps!"
      
      };
      })

      .catch(error=>{
          console.log(error.message);
      })
  }
</script>
<script src="Cell.js"></script>
<script src="puzzle.js"></script>
  </body>

</html>>