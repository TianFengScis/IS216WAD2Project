{"remainingRequest":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/thread-loader/dist/cjs.js!/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/babel-loader/lib/index.js!/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tianfeng/Desktop/APP/IS216WAD2Project/src/views/Community.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/src/views/Community.vue","mtime":1636870101419},{"path":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tianfeng/Desktop/APP/IS216WAD2Project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90aWFuZmVuZy9EZXNrdG9wL0FQUC9JUzIxNldBRDJQcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy90aWFuZmVuZy9EZXNrdG9wL0FQUC9JUzIxNldBRDJQcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIDx0ZW1wbGF0ZT4KLy8gICA8ZGl2IGlkPSJhcHAiPgovLyAgICAgPGRpdiBpZD0ibmF2Ij4KLy8gICAgICAgPHJvdXRlci1saW5rIHRvPSIvIj5Ib21lPC9yb3V0ZXItbGluaz4gfAovLyAgICAgICA8cm91dGVyLWxpbmsgdG89Ii9hYm91dCI+QWJvdXQ8L3JvdXRlci1saW5rPgovLyAgICAgPC9kaXY+Ci8vICAgICA8cm91dGVyLXZpZXcvPgovLyAgIDwvZGl2PgovLyA8L3RlbXBsYXRlPgovLzxIZWxsb1dvcmxkIG1zZz0iV2VsY29tZSB0byBZb3VyIFZ1ZS5qcyBBcHAiLz4KLy9pbXBvcnQgSGVsbG9Xb3JsZCBmcm9tICcuL2NvbXBvbmVudHMvSGVsbG9Xb3JsZC52dWUnCmltcG9ydCB7IGdldEF1dGgsIG9uQXV0aFN0YXRlQ2hhbmdlZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHVwZGF0ZVBhc3N3b3JkIH0gZnJvbSAiZmlyZWJhc2UvYXV0aCI7CmltcG9ydCB7IGdldERvY3MsIGdldEZpcmVzdG9yZSwgY29sbGVjdGlvbiwgc2V0RG9jLCBkb2MsIG9uU25hcHNob3QgfSBmcm9tICJmaXJlYmFzZS9maXJlc3RvcmUiOwppbXBvcnQgeyBnZXRTdG9yYWdlLCByZWYsIHVwbG9hZEJ5dGVzLCBnZXREb3dubG9hZFVSTCB9IGZyb20gImZpcmViYXNlL3N0b3JhZ2UiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2FwcCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhc2tJdGVtOiBbLy8gewogICAgICAgIC8vICAgdGFza0lkIDogMSwKICAgICAgICAvLyAgIHRhc2tEZXNjOiAiVGhpcyBpcyB0YXNrIDEiLAogICAgICAgIC8vICAgdGFza0R1ZTogIjExLzgvMjAyMSIsCiAgICAgICAgLy8gICB0YXNrVGltZTogIiIKICAgICAgICAvLyB9LAogICAgICAgIC8vIHsKICAgICAgICAvLyAgIHRhc2tJZCA6IDIsCiAgICAgICAgLy8gICB0YXNrRGVzYzogIlRoaXMgaXMgdGFzayAyIiwKICAgICAgICAvLyAgIHRhc2tEdWU6ICIxMS84LzIwMjEiLAogICAgICAgIC8vICAgdGFza1RpbWU6ICIiCiAgICAgICAgLy8gfQogICAgICBdLAogICAgICBuZXdUYXNrSXRlbTogewogICAgICAgIG5ld1Rhc2tEZXNjOiAiIiwKICAgICAgICBuZXdUYXNrRHVlRGF0ZTogIiIsCiAgICAgICAgbmV3VGFza0R1ZVRpbWU6ICIiCiAgICAgIH0sCiAgICAgIC8vbW9kYWxzIAogICAgICBzaG93TW9kYWw6IGZhbHNlLAogICAgICAvL2ZvciBuZXcgdGFzawogICAgICBzaG93U2VhcmNoRnJpZW5kOiBmYWxzZSwKICAgICAgc2hvd0ZyaWVuZEluZm86IGZhbHNlLAogICAgICBzaG93UHJvZmlsZTogZmFsc2UsCiAgICAgIC8vc2VhcmNoCiAgICAgIHNlYXJjaEVtYWlsOiAiIiwKICAgICAgc2VhcmNoVXNlcjogbnVsbCwKICAgICAgLy9lcnJvcnMKICAgICAgbmV3VGFza0Vycm9yOiBmYWxzZSwKICAgICAgLy9mcmllbmRzCiAgICAgIG15RnJpZW5kczogW10sCiAgICAgIG15RnJpZW5kUmVxdWVzdDogW10sCiAgICAgIGZyaWVuZEluZm86IG51bGwsCiAgICAgIHBob3RvTGluazogWyJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXIxLnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXIyLnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXIzLnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXI0LnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXI1LnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXI2LnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXI3LnBuZyIsICJodHRwczovL2Jvb3RkZXkuY29tL2ltZy9Db250ZW50L2F2YXRhci9hdmF0YXI4LnBuZyJdLAogICAgICAvL2N1cnJlbnRVc2VyCiAgICAgIHVzZXI6IG51bGwsCiAgICAgIC8vY29tbXVuaXR5IHBvc3QKICAgICAgcGhvdG9QYXRoOiBudWxsLAogICAgICBwb3N0TWVzc2FnZTogIiIsCiAgICAgIGFsbFBvc3Q6IFtdLAogICAgICBteVBvc3Q6IDAsCiAgICAgIHBpY3RVcmw6ICIiLAogICAgICBub1B1Ymxpc2hDb250ZW50OiBmYWxzZSwKICAgICAgLy9Db21tZW50CiAgICAgIG5ld0NvbW1lbnQ6ICIiLAogICAgICAvL2NoYW5nZVBhc3N3b3JkCiAgICAgIGVkaXQ6IGZhbHNlLAogICAgICBzYXZlQnRuOiBmYWxzZSwKICAgICAgb2xkUHc6ICIiLAogICAgICBuZXdQdzogIiIsCiAgICAgIG5ld1VzZXJuYW1lOiAiIiwKICAgICAgbmV3VXNlcm5hbWVFcnJvcjogZmFsc2UsCiAgICAgIHVwZGF0ZVBhc3N3b3JkRXJyb3I6IGZhbHNlLAogICAgICBzZWxlY3RlZEltZzogIiIsCiAgICAgIC8vYXBpIGNvbnRlbnQKICAgICAgYXBpQ29udGVudDogIiIKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7Ly9IZWxsb1dvcmxkLAogIH0sCiAgbWV0aG9kczogewogICAgYWRkTmV3VGFzazogZnVuY3Rpb24gYWRkTmV3VGFzaygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMubmV3VGFza0l0ZW0pOwogICAgICB2YXIgaXRlbSA9IHsKICAgICAgICAvL3Rhc2tJZCA6IHRoaXMudGFza0l0ZW0ubGVuZ3RoICsgMSwKICAgICAgICB0YXNrRGVzYzogdGhpcy5uZXdUYXNrSXRlbS5uZXdUYXNrRGVzYywKICAgICAgICB0YXNrRHVlOiB0aGlzLm5ld1Rhc2tJdGVtLm5ld1Rhc2tEdWVEYXRlLAogICAgICAgIHRhc2tUaW1lOiB0aGlzLm5ld1Rhc2tJdGVtLm5ld1Rhc2tEdWVUaW1lCiAgICAgIH07CiAgICAgIHRoaXMudGFza0l0ZW0ucHVzaChpdGVtKTsKICAgICAgdGhpcy5zaG93TW9kYWwgPSBmYWxzZTsgLy91cGRhdGUgdGhlIGRhdGFiYXNlCgogICAgICB2YXIgdXBkYXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnRhc2tJdGVtKTsgLy9jb25zb2xlLmxvZyh1cGRhdGVkSXRlbSk7CgogICAgICB2YXIgcHJvbWlzZSA9IHVwZGF0ZURiVGFza0l0ZW0odGhpcy51c2VyVWlkLCB1cGRhdGVkSXRlbSk7CiAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3MiKTsKICAgICAgICBfdGhpcy5uZXdUYXNrSXRlbS5uZXdUYXNrRGVzYyA9ICIiOwogICAgICAgIF90aGlzLm5ld1Rhc2tJdGVtLm5ld1Rhc2tEdWVEYXRlID0gIiI7CiAgICAgICAgX3RoaXMubmV3VGFza0l0ZW0ubmV3VGFza0R1ZVRpbWUgPSAiIjsKICAgICAgICBfdGhpcy5uZXdUYXNrRXJyb3IgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlVGFzazogZnVuY3Rpb24gcmVtb3ZlVGFzayhpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMudGFza0l0ZW0gPSB0aGlzLnRhc2tJdGVtLmZpbHRlcihmdW5jdGlvbiAoaXRlbSwga2V5KSB7CiAgICAgICAgcmV0dXJuIGtleSAhPSBpZDsKICAgICAgfSk7IC8vdXBkYXRlIHRoZSBkYXRhYmFzZQoKICAgICAgdmFyIHVwZGF0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy50YXNrSXRlbSk7IC8vY29uc29sZS5sb2codXBkYXRlZEl0ZW0pOwoKICAgICAgdmFyIHByb21pc2UgPSB1cGRhdGVEYlRhc2tJdGVtKHRoaXMudXNlclVpZCwgdXBkYXRlZEl0ZW0pOwogICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzIik7CiAgICAgICAgX3RoaXMyLm5ld1Rhc2tJdGVtLm5ld1Rhc2tEZXNjID0gIiI7CiAgICAgICAgX3RoaXMyLm5ld1Rhc2tJdGVtLm5ld1Rhc2tEdWVEYXRlID0gIiI7CiAgICAgICAgX3RoaXMyLm5ld1Rhc2tJdGVtLm5ld1Rhc2tEdWVUaW1lID0gIiI7CiAgICAgICAgX3RoaXMyLm5ld1Rhc2tFcnJvciA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBzaG93TmV3VGFza0Vycm9yOiBmdW5jdGlvbiBzaG93TmV3VGFza0Vycm9yKCkgewogICAgICB0aGlzLm5ld1Rhc2tFcnJvciA9IHRydWU7CiAgICB9LAogICAgZmluZFVzZXI6IGZ1bmN0aW9uIGZpbmRVc2VyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VhcmNoRW1haWwpOwogICAgICB2YXIgdXNlckluZm8gPSBnZXRTZWFyY2hVc2VyKHRoaXMuc2VhcmNoRW1haWwpOwogICAgICB1c2VySW5mby50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAgIF90aGlzMy5zZWFyY2hVc2VyID0gdXNlcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLnNlYXJjaFVzZXIgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRGcmllbmRSZXF1ZXN0OiBmdW5jdGlvbiBzZW5kRnJpZW5kUmVxdWVzdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlYXJjaFVzZXIpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVzZXIpCiAgICAgIHZhciB1cGRhdGVkUmVxdWVzdCA9IFtdOwogICAgICB2YXIgYWxsUmVxdWVzdCA9IGdldERhdGEodGhpcy5zZWFyY2hVc2VyLnVpZCwgImZyaWVuZHJlcXVlc3QiKTsKICAgICAgYWxsUmVxdWVzdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHsKICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgcmVzdWx0ID0gT2JqZWN0LnZhbHVlcyhyZXN1bHQpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwoKICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlc3VsdCksCiAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGl0ZW0pCiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHsKICAgICAgICAgICAgICAgICAgdWlkOiBpdGVtLnVpZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IGl0ZW0uZW1haWwsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBpdGVtLnVzZXJuYW1lCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdXBkYXRlZFJlcXVlc3QucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdXBkYXRlZFJlcXVlc3QucHVzaChfdGhpczQudXNlcik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1cGRhdGVkUmVxdWVzdC5wdXNoKF90aGlzNC51c2VyKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIk5vIHJlcXVlc3QiKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXBkYXRlZFJlcXVlc3QucHVzaChfdGhpczQudXNlcik7CiAgICAgICAgICBjb25zb2xlLmxvZygiTm8gcmVxdWVzdCBsaXN0Iik7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVzcG9uc2UgPSBzZW5kRGJGcmllbmRSZXF1ZXN0KHVwZGF0ZWRSZXF1ZXN0LCBfdGhpczQuc2VhcmNoVXNlcik7CiAgICAgICAgcmVzcG9uc2UudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZnJpZW5kIHJlcXVlc3Qgc2VuZCIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBwcm9jZXNzRnJpZW5kUmVxdWVzdDogZnVuY3Rpb24gcHJvY2Vzc0ZyaWVuZFJlcXVlc3QoZnJpZW5kLCBpZCwgYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy9hY3Rpb24gdHJ1ZSAtPiBhY2NlcHQKICAgICAgLy9hY3Rpb24gZmFsc2UgLT4gcmVqZWN0CiAgICAgIHRoaXMubXlGcmllbmRSZXF1ZXN0ID0gdGhpcy5teUZyaWVuZFJlcXVlc3QuZmlsdGVyKGZ1bmN0aW9uIChyZXF1ZXN0LCBrZXkpIHsKICAgICAgICByZXR1cm4ga2V5ICE9IGlkOwogICAgICB9KTsgLy91cGRhdGUgdGhlIGRhdGFiYXNlCiAgICAgIC8vdmFyIHVwZGF0ZVJlcXVlc3QgPSBPYmplY3QuYXNzaWduKHt9LHRoaXMubXlGcmllbmRSZXF1ZXN0KTsKCiAgICAgIHZhciBwcm9taXNlID0gc2VuZERiRnJpZW5kUmVxdWVzdCh0aGlzLm15RnJpZW5kUmVxdWVzdCwgdGhpcy51c2VyKTsKICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoYWN0aW9uID09IHRydWUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJGcmllbmQgUmVxdWVzdCBhY2NlcHRlZCAhIik7CgogICAgICAgICAgX3RoaXM1Lm15RnJpZW5kcy5wdXNoKGZyaWVuZCk7IC8vdXBkYXRlIGRhdGFiYXNlIGZyaWVuZCBsaXN0IGZvciBjdXJyZW50IHVzZXIKCgogICAgICAgICAgdmFyIGl0ZW1zID0gdXBkYXRlRGJGcmllbmRzKF90aGlzNS51c2VyLnVpZCwgX3RoaXM1Lm15RnJpZW5kcyk7CiAgICAgICAgICBpdGVtcy50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkZyaWVuZCBsaXN0IHVwZGF0ZWQhIik7CiAgICAgICAgICB9KTsgLy91cGRhdGUgZGF0YWJhc2UgZnJpZW5kIGxpc3QgZm9yIGZyaWVuZAoKICAgICAgICAgIHZhciB1cGRhdGVkRnJpZW5kTGlzdEl0ZW1zID0gW107CiAgICAgICAgICB2YXIgZnJpZW5kTGlzdEl0ZW1zID0gZ2V0RGF0YShmcmllbmQudWlkLCAiZnJpZW5kcyIpOwogICAgICAgICAgZnJpZW5kTGlzdEl0ZW1zLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHsKICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBPYmplY3QudmFsdWVzKHJlc3VsdCk7IC8vY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlc3VsdCksCiAgICAgICAgICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtKQogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gewogICAgICAgICAgICAgICAgICAgICAgdWlkOiBpdGVtLnVpZCwKICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBpdGVtLmVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGl0ZW0udXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlUGljOiBpdGVtLnByb2ZpbGVQaWMKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRGcmllbmRMaXN0SXRlbXMucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdXBkYXRlZEZyaWVuZExpc3RJdGVtcy5wdXNoKF90aGlzNS51c2VyKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdXBkYXRlZEZyaWVuZExpc3RJdGVtcy5wdXNoKF90aGlzNS51c2VyKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJObyBGcmllbmRzIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHVwZGF0ZWRGcmllbmRMaXN0SXRlbXMucHVzaChfdGhpczUudXNlcik7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIk5vIEZyaWVuZGxpc3QiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaXRlbXMgPSB1cGRhdGVEYkZyaWVuZHMoZnJpZW5kLnVpZCwgdXBkYXRlZEZyaWVuZExpc3RJdGVtcyk7CiAgICAgICAgICAgIGl0ZW1zLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGcmllbmQgbGlzdCB1cGRhdGVkISIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRnJpZW5kIFJlcXVlc3QgcmVqZWN0ZWQgISIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlRnJpZW5kOiBmdW5jdGlvbiBkZWxldGVGcmllbmQodW5mcmllbmQpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLm15RnJpZW5kcyA9IHRoaXMubXlGcmllbmRzLmZpbHRlcihmdW5jdGlvbiAoZnJpZW5kKSB7CiAgICAgICAgcmV0dXJuIGZyaWVuZC5lbWFpbCAhPSB1bmZyaWVuZC5lbWFpbDsKICAgICAgfSk7IC8vZGVsZXRlIGZvciBjdXJyZW50IHVzZXIKCiAgICAgIHZhciBwcm9taXNlID0gdXBkYXRlRGJGcmllbmRzKHRoaXMudXNlci51aWQsIHRoaXMubXlGcmllbmRzKTsKICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygiRnJpZW5kIGxpc3QgdXBkYXRlZCEiKTsgLy9nZXQgdGFyZ2V0IHVuZnJpZW5kCgogICAgICAgIHZhciB1cGRhdGVkRnJpZW5kTGlzdEl0ZW1zID0gW107CiAgICAgICAgdmFyIGZyaWVuZExpc3RJdGVtcyA9IGdldERhdGEodW5mcmllbmQudWlkLCAiZnJpZW5kcyIpOwogICAgICAgIGZyaWVuZExpc3RJdGVtcy50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gT2JqZWN0LnZhbHVlcyhyZXN1bHQpOyAvL2NvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzdWx0KSwKICAgICAgICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDMudmFsdWU7CgogICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGl0ZW0pCiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmVtYWlsICE9IF90aGlzNi51c2VyLmVtYWlsKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICB1aWQ6IGl0ZW0udWlkLAogICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGl0ZW0uZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogaXRlbS51c2VybmFtZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEZyaWVuZExpc3RJdGVtcy5wdXNoKHRlbXApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGl0ZW1zID0gdXBkYXRlRGJGcmllbmRzKHVuZnJpZW5kLnVpZCwgdXBkYXRlZEZyaWVuZExpc3RJdGVtcyk7CiAgICAgICAgICBpdGVtcy50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkZyaWVuZCBsaXN0IHVwZGF0ZWQhIik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RnJpZW5kSW5mbzogZnVuY3Rpb24gZ2V0RnJpZW5kSW5mbyhmcmllbmQpIHsKICAgICAgdGhpcy5mcmllbmRJbmZvID0gZnJpZW5kOwogICAgfSwKICAgIHNlbGVjdEltZzogZnVuY3Rpb24gc2VsZWN0SW1nKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIC8vIHZhciBJbWdOYW1lLCBJbWdVcmw7CiAgICAgIC8vIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaGlkZGVuU2VsZWN0SW1nIik7CgogICAgICBpbnB1dC5vbmNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGZpbGVzID0gZS50YXJnZXQuZmlsZXM7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlpbWciKS5zcmMgPSByZWFkZXIucmVzdWx0OwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15aW1nIikuc3R5bGUgPSAiZGlzcGxheTpibG9jaztoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHg7IGJvcmRlcjoxcHggc29saWQgYmxhY2siOwogICAgICAgIH07IC8vY29uc29sZS5sb2coZmlsZXNbMF0ubmFtZSk7CgoKICAgICAgICBfdGhpczcucGhvdG9QYXRoID0gZmlsZXNbMF07CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZXNbMF0pOwogICAgICB9OwoKICAgICAgaW5wdXQuY2xpY2soKTsKICAgIH0sCiAgICBwdWJsaXNoUG9zdDogZnVuY3Rpb24gcHVibGlzaFBvc3QoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIGRvd25sb2FkVXJsID0gIiI7CiAgICAgIHZhciBzdG9yYWdlID0gZ2V0U3RvcmFnZSgpOwoKICAgICAgaWYgKHRoaXMucGhvdG9QYXRoICE9IG51bGwpIHsKICAgICAgICBkb3dubG9hZFVybCA9ICJpbWFnZXMvIiArIHRoaXMucGhvdG9QYXRoLm5hbWU7CiAgICAgICAgdmFyIHBob3RvUmVmID0gcmVmKHN0b3JhZ2UsIGRvd25sb2FkVXJsKTsKICAgICAgICB1cGxvYWRCeXRlcyhwaG90b1JlZiwgdGhpcy5waG90b1BhdGgpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhzbmFwc2hvdCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBnZXRVcmwgPSBnZXREb3dubG9hZFVSTChyZWYoc3RvcmFnZSwgZG93bmxvYWRVcmwpKTsKICAgICAgZ2V0VXJsLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgIHZhciBuZXdQb3N0ID0gewogICAgICAgICAgZG93bmxvYWRVcmw6IHVybCwKICAgICAgICAgIHBvc3RNZXNzYWdlOiBfdGhpczgucG9zdE1lc3NhZ2UsCiAgICAgICAgICB1aWQ6IF90aGlzOC51c2VyLnVpZCwKICAgICAgICAgIGVtYWlsOiBfdGhpczgudXNlci5lbWFpbCwKICAgICAgICAgIHVzZXJuYW1lOiBfdGhpczgudXNlci51c2VybmFtZSwKICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCksCiAgICAgICAgICBjb21tZW50czogW10sCiAgICAgICAgICBwcm9maWxlUGljOiBfdGhpczgudXNlci5wcm9maWxlUGljCiAgICAgICAgfTsKCiAgICAgICAgX3RoaXM4LnByb2Nlc3NQdWJsaXNoKG5ld1Bvc3QpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5ld1Bvc3QgPSB7CiAgICAgICAgICBkb3dubG9hZFVybDogIiIsCiAgICAgICAgICBwb3N0TWVzc2FnZTogX3RoaXM4LnBvc3RNZXNzYWdlLAogICAgICAgICAgdWlkOiBfdGhpczgudXNlci51aWQsCiAgICAgICAgICBlbWFpbDogX3RoaXM4LnVzZXIuZW1haWwsCiAgICAgICAgICB1c2VybmFtZTogX3RoaXM4LnVzZXIudXNlcm5hbWUsCiAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpLAogICAgICAgICAgY29tbWVudHM6IFtdLAogICAgICAgICAgcHJvZmlsZVBpYzogX3RoaXM4LnVzZXIucHJvZmlsZVBpYwogICAgICAgIH07CgogICAgICAgIF90aGlzOC5wcm9jZXNzUHVibGlzaChuZXdQb3N0KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlUGhvdG86IGZ1bmN0aW9uIHJlbW92ZVBob3RvKCkgewogICAgICB0aGlzLnBob3RvUGF0aCA9IG51bGw7CiAgICAgIHRoaXMucGljdFVybCA9ICIiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlpbWciKS5zcmMgPSAiIjsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15aW1nIikuc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICB9LAogICAgcHJvY2Vzc1B1Ymxpc2g6IGZ1bmN0aW9uIHByb2Nlc3NQdWJsaXNoKG5ld1Bvc3QpIHsKICAgICAgdmFyIHVwZGF0ZVBvc3QgPSBbXTsKICAgICAgdmFyIGl0ZW1zID0gZ2V0RGF0YSgiYWxscG9zdCIsICJwb3N0Iik7CiAgICAgIGl0ZW1zLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewogICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggIT0gMCkgewogICAgICAgICAgICByZXN1bHQgPSBPYmplY3QudmFsdWVzKHJlc3VsdCk7IC8vY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzdWx0KSwKICAgICAgICAgICAgICAgIF9zdGVwNDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtKQogICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgIGRvd25sb2FkVXJsOiBpdGVtLmRvd25sb2FkVXJsLAogICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZTogaXRlbS5wb3N0TWVzc2FnZSwKICAgICAgICAgICAgICAgICAgdWlkOiBpdGVtLnVpZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IGl0ZW0uZW1haWwsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBpdGVtLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICBkYXRlOiBpdGVtLmRhdGUsCiAgICAgICAgICAgICAgICAgIHByb2ZpbGVQaWM6IGl0ZW0ucHJvZmlsZVBpYwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHVwZGF0ZVBvc3QucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiTm8gRnJpZW5kcyIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTm8gRnJpZW5kbGlzdCIpOwogICAgICAgIH0KCiAgICAgICAgdXBkYXRlUG9zdC5wdXNoKG5ld1Bvc3QpOwogICAgICAgIHZhciBwcm9taXNlID0gdXBkYXRlRGJQb3N0KHVwZGF0ZVBvc3QpOwogICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiUG9zdCBVcGRhdGVkIik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLnBob3RvUGF0aCA9IG51bGw7CiAgICAgIHRoaXMucG9zdE1lc3NhZ2UgPSAiIjsKICAgICAgdGhpcy5waWN0VXJsID0gIiI7IC8vdGhpcy5hbGxQb3N0LnVuc2hpZnQobmV3UG9zdCk7CgogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlpbWciKS5zcmMgPSAiIjsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15aW1nIikuc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICB9LAogICAgcHJvY2Vzc0NvbW1lbnQ6IGZ1bmN0aW9uIHByb2Nlc3NDb21tZW50KGtleSkgewogICAgICB0aGlzLmFsbFBvc3Rba2V5XS5jb21tZW50cy5wdXNoKHRoaXMubmV3Q29tbWVudCk7CiAgICAgIHZhciB0ZW1wID0gdGhpcy5hbGxQb3N0OwogICAgICB1cGRhdGVEYlBvc3QodGVtcCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coIkNvbW1lbnQgdXBkYXRlZCIpOwogICAgICB9KTsKICAgICAgdGhpcy5uZXdDb21tZW50ID0gIiI7CiAgICB9LAogICAgdXBkYXRlVXNlcm5hbWU6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJuYW1lKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHRoaXMubmV3VXNlcm5hbWVFcnJvciA9IGZhbHNlOwogICAgICB2YXIgZGIgPSBnZXRGaXJlc3RvcmUoKTsKICAgICAgdmFyIHVzZXJSZWYgPSBkb2MoZGIsICJ1c2VycyIsIHRoaXMudXNlci51aWQpOwoKICAgICAgaWYgKHRoaXMubmV3VXNlcm5hbWUudHJpbSgpID09ICIiKSB7CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbWcgIT0gIiIpIHsKICAgICAgICAgIHNldERvYyh1c2VyUmVmLCB7CiAgICAgICAgICAgIHByb2ZpbGVQaWM6IHRoaXMuc2VsZWN0ZWRJbWcKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbWVyZ2U6IHRydWUKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiVXNlcm5hbWUgdXBkYXRlZCIpOwogICAgICAgICAgICBfdGhpczkudXNlci5wcm9maWxlUGljID0gX3RoaXM5LnNlbGVjdGVkSW1nOwogICAgICAgICAgICBfdGhpczkuc2VsZWN0ZWRJbWcgPSAiIjsKICAgICAgICAgICAgX3RoaXM5LnNob3dQcm9maWxlID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXMubmV3VXNlcm5hbWVFcnJvciA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzZXREb2ModXNlclJlZiwgewogICAgICAgIHVzZXJuYW1lOiB0aGlzLm5ld1VzZXJuYW1lCiAgICAgIH0sIHsKICAgICAgICBtZXJnZTogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygiVXNlcm5hbWUgdXBkYXRlZCIpOwogICAgICAgIF90aGlzOS51c2VyLnVzZXJuYW1lID0gX3RoaXM5Lm5ld1VzZXJuYW1lOwogICAgICAgIF90aGlzOS5uZXdVc2VybmFtZSA9ICIiOwogICAgICAgIF90aGlzOS5zaG93UHJvZmlsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VQYXNzd29yZDogZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciBhdXRoID0gZ2V0QXV0aCgpOwogICAgICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCB0aGlzLnVzZXIuZW1haWwsIHRoaXMub2xkUHcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vY29ycmVjdCBwYXNzd29yZAogICAgICAgIHZhciB1c2VyID0gYXV0aC5jdXJyZW50VXNlcjsKICAgICAgICB1cGRhdGVQYXNzd29yZCh1c2VyLCBfdGhpczEwLm5ld1B3KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJQYXNzd29yZCB1cGRhdGVkIik7CiAgICAgICAgICBfdGhpczEwLm5ld1B3ID0gIiI7CiAgICAgICAgICBfdGhpczEwLm9sZFB3ID0gIiI7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEwLnVwZGF0ZVBhc3N3b3JkRXJyb3IgPSB0cnVlOwogICAgICAgIF90aGlzMTAubmV3UHcgPSAiIjsKICAgICAgICBfdGhpczEwLm9sZFB3ID0gIiI7CiAgICAgIH0pOwogICAgfSwKICAgIHRvTWVzc2FnZTogZnVuY3Rpb24gdG9NZXNzYWdlKCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJNZXNzYWdlcyI7CiAgICB9LAogICAgbmV3Sm9rZTogZnVuY3Rpb24gbmV3Sm9rZSgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCJodHRwczovL2dlZWstam9rZXMuc2FtZWVya3VtYXIud2Vic2l0ZS9hcGk/Zm9ybWF0PWpzb24iKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXMxMS5hcGlDb250ZW50ID0gcmVzcC5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMTEuYXBpQ29udGVudCA9IGU7CiAgICAgIH0pOwogICAgfQogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgdmFyIGF1dGggPSBnZXRBdXRoKCk7CiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAvLyBVc2VyIGlzIHNpZ25lZCBpbiwgc2VlIGRvY3MgZm9yIGEgbGlzdCBvZiBhdmFpbGFibGUgcHJvcGVydGllcwogICAgICAgIC8vIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3JlZmVyZW5jZS9qcy9maXJlYmFzZS5Vc2VyCiAgICAgICAgLy9jb25zb2xlLmxvZyh1c2VyLmVtYWlsKTsKICAgICAgICB2YXIgdXNlckluZm8gPSBnZXRTZWFyY2hVc2VyKHVzZXIuZW1haWwpOwogICAgICAgIHVzZXJJbmZvLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgIF90aGlzMTIudXNlciA9IHVzZXI7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMxMi51c2VyVWlkID0gdXNlci51aWQ7IC8vbG9nIHRoZSB1aWQgaW4gdnVlCiAgICAgICAgLy9TdGFydCBnZXR0aW5nIHRhc2tsaXN0CgogICAgICAgIHZhciBpdGVtcyA9IGdldERhdGEoX3RoaXMxMi51c2VyVWlkLCAidGFza2xpc3QiKTsKICAgICAgICBpdGVtcy50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIC8vaGFuZGxlcyB0aGUgcHJvbWlzZQogICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgICByZXN1bHQgPSBPYmplY3QudmFsdWVzKHJlc3VsdCk7IC8vY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXN1bHQpLAogICAgICAgICAgICAgICAgICBfc3RlcDU7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtKTsKICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgICAgdGFza0Rlc2M6IGl0ZW0udGFza0Rlc2MsCiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZTogaXRlbS50YXNrRHVlLAogICAgICAgICAgICAgICAgICAgIHRhc2tUaW1lOiBpdGVtLnRhc2tUaW1lCiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICBfdGhpczEyLnRhc2tJdGVtLnB1c2godGVtcCk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB2dWUgZGF0YQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIk5vIEl0ZW0iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIm5vIHRhc2sgeWV0Iik7CiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vZW5kIGdldCB0YXNrbGlzdCBpdGVtcwogICAgICAgIC8vc3RhcnQgZ2V0dGluZyBmcmllbmQgbGlzdAogICAgICAgIC8vIGl0ZW1zID0gZ2V0RGF0YSh1c2VyLnVpZCwiZnJpZW5kcyIpOwogICAgICAgIC8vIGl0ZW1zLnRoZW4oKHJlc3VsdCk9PnsKICAgICAgICAvLyAgIGlmKHJlc3VsdCAhPSBudWxsKXsKICAgICAgICAvLyAgICAgaWYocmVzdWx0Lmxlbmd0aCAhPSAwKXsKICAgICAgICAvLyAgICAgICByZXN1bHQgPSBPYmplY3QudmFsdWVzKHJlc3VsdCk7CiAgICAgICAgLy8gICAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgIC8vICAgICAgIGZvcihsZXQgaXRlbSBvZiByZXN1bHQpewogICAgICAgIC8vICAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtKQogICAgICAgIC8vICAgICAgICAgZ2V0U2VhcmNoVXNlcihpdGVtLmVtYWlsKS50aGVuKCh1c2VyKT0+ewogICAgICAgIC8vICAgICAgICAgICAgIHZhciB0ZW1wID0gewogICAgICAgIC8vICAgICAgICAgICAgIHVpZCA6IHVzZXIudWlkLAogICAgICAgIC8vICAgICAgICAgICAgIGVtYWlsIDogdXNlci5lbWFpbCwKICAgICAgICAvLyAgICAgICAgICAgICB1c2VybmFtZSA6IHVzZXIudXNlcm5hbWUsCiAgICAgICAgLy8gICAgICAgICAgICAgcHJvZmlsZVBpYyA6IHVzZXIucHJvZmlsZVBpYwogICAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZygiVXBkYXRpbmcgZnJpZW5kIGxpc3QiKQogICAgICAgIC8vICAgICAgICAgICAgIHRoaXMubXlGcmllbmRzLnB1c2godGVtcCk7CiAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAvLyAgICAgICB9CiAgICAgICAgLy8gICAgIH1lbHNlewogICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCJObyBGcmllbmRzIikKICAgICAgICAvLyAgICAgfQogICAgICAgIC8vICAgfWVsc2V7CiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJObyBGcmllbmRsaXN0Iik7CiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gfSk7IC8vZW5kIGdldHRpbmcgZnJpZW5kIGxpc3QKICAgICAgICAvL3N0YXJ0IGdldHRpbmcgZnJpZW5kIHJlcXVlc3QKICAgICAgICAvLyBpdGVtcyA9IGdldERhdGEodGhpcy51c2VyVWlkLCJmcmllbmRyZXF1ZXN0Iik7CiAgICAgICAgLy8gaXRlbXMudGhlbigocmVzdWx0KT0+ewogICAgICAgIC8vICAgaWYocmVzdWx0ICE9IG51bGwpewogICAgICAgIC8vICAgICBpZihyZXN1bHQubGVuZ3RoICE9IDApewogICAgICAgIC8vICAgICAgIHJlc3VsdCA9IE9iamVjdC52YWx1ZXMocmVzdWx0KTsKICAgICAgICAvLyAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgLy8gICAgICAgZm9yKGxldCBpdGVtIG9mIHJlc3VsdCl7CiAgICAgICAgLy8gICAgICAgICAvL2NvbnNvbGUubG9nKGl0ZW0pCiAgICAgICAgLy8gICAgICAgICBnZXRTZWFyY2hVc2VyKGl0ZW0uZW1haWwpLnRoZW4oKHVzZXIpPT57CiAgICAgICAgLy8gICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgLy8gICAgICAgICAgICAgdWlkIDogdXNlci51aWQsCiAgICAgICAgLy8gICAgICAgICAgICAgZW1haWwgOiB1c2VyLmVtYWlsLAogICAgICAgIC8vICAgICAgICAgICAgIHVzZXJuYW1lIDogdXNlci51c2VybmFtZSwKICAgICAgICAvLyAgICAgICAgICAgICBwcm9maWxlUGljIDogdXNlci5wcm9maWxlUGljCiAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgIHRoaXMubXlGcmllbmRSZXF1ZXN0LnB1c2godGVtcCk7CiAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAvLyAgICAgICB9CiAgICAgICAgLy8gICAgIH1lbHNlewogICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCJObyBSZXF1ZXN0IikKICAgICAgICAvLyAgICAgfQogICAgICAgIC8vICAgfWVsc2V7CiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJObyByZXF1ZXN0IGxpc3QiKTsKICAgICAgICAvLyAgIH0KICAgICAgICAvLyB9KTsKICAgICAgICAvL3N0YXJ0IGdldHRpbmcgYWxsIHBvc3QKCiAgICAgICAgaXRlbXMgPSBnZXREYXRhKCJhbGxwb3N0IiwgInBvc3QiKTsKICAgICAgICBpdGVtcy50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gT2JqZWN0LnZhbHVlcyhyZXN1bHQpOyAvL2NvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzdWx0KSwKICAgICAgICAgICAgICAgICAgX3N0ZXA2OwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDYudmFsdWU7CiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coaXRlbSkKICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBbXTsKCiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvbW1lbnRzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gT2JqZWN0LnZhbHVlcyhpdGVtLmNvbW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRVcmw6IGl0ZW0uZG93bmxvYWRVcmwsCiAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2U6IGl0ZW0ucG9zdE1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgdWlkOiBpdGVtLnVpZCwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogaXRlbS5lbWFpbCwKICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogaXRlbS51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICBkYXRlOiBpdGVtLmRhdGUsCiAgICAgICAgICAgICAgICAgICAgY29tbWVudHM6IGNvbW1lbnQsCiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZVBpYzogaXRlbS5wcm9maWxlUGljCiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICBfdGhpczEyLmFsbFBvc3QudW5zaGlmdCh0ZW1wKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjYuZShlcnIpOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3I2LmYoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIk5vIFBvc3QiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIk5vIHBvc3QgbGlzdCIpOwogICAgICAgICAgfQogICAgICAgIH0pOyAvLyAuLi4KICAgICAgICAvL3JlYWwgdGltZSBsc2l0ZW4gdG8gZnJpZW5kcyBsaXN0CgogICAgICAgIHZhciBkYiA9IGdldEZpcmVzdG9yZSgpOwogICAgICAgIG9uU25hcHNob3QoZG9jKGRiLCAiZnJpZW5kcyIsIHVzZXIudWlkKSwgZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgLy9jb25zb2xlLmxvZygiQ3VycmVudCBEYXRhOiAiLGRvYy5kYXRhKCkpOwogICAgICAgICAgaWYgKGRvYy5kYXRhKCkpIHsKICAgICAgICAgICAgX3RoaXMxMi5teUZyaWVuZHMgPSBbXTsKICAgICAgICAgICAgdmFyIHRlbXAgPSBkb2MuZGF0YSgpLm15RnJpZW5kczsKCiAgICAgICAgICAgIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGVtcCksCiAgICAgICAgICAgICAgICBfc3RlcDc7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgZiA9IF9zdGVwNy52YWx1ZTsKICAgICAgICAgICAgICAgIGdldFNlYXJjaFVzZXIoZi5lbWFpbCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgICBfdGhpczEyLm15RnJpZW5kcy5wdXNoKHVzZXIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3I3LmUoZXJyKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBfaXRlcmF0b3I3LmYoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOyAvL3JlYWwgdGltZSBsaXN0ZW4gdG8gZnJpZW5kcmVxdWVzdCAKCiAgICAgICAgb25TbmFwc2hvdChkb2MoZGIsICJmcmllbmRyZXF1ZXN0IiwgdXNlci51aWQpLCBmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJDdXJyZW50IERhdGE6ICIsZG9jLmRhdGEoKSk7CiAgICAgICAgICBpZiAoZG9jLmRhdGEoKSkgewogICAgICAgICAgICBfdGhpczEyLm15RnJpZW5kUmVxdWVzdCA9IFtdOwogICAgICAgICAgICB2YXIgdGVtcCA9IGRvYy5kYXRhKCkucmVxdWVzdDsKCiAgICAgICAgICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGVtcCksCiAgICAgICAgICAgICAgICBfc3RlcDg7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgZiA9IF9zdGVwOC52YWx1ZTsKICAgICAgICAgICAgICAgIGdldFNlYXJjaFVzZXIoZi5lbWFpbCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgICBfdGhpczEyLm15RnJpZW5kUmVxdWVzdC5wdXNoKHVzZXIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBfaXRlcmF0b3I4LmYoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOyAvL3JlYWwgdGltZSBsaXN0ZW4gdG8gcG9zdAoKICAgICAgICBvblNuYXBzaG90KGRvYyhkYiwgInBvc3QiLCAiYWxscG9zdCIpLCBmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJDdXJyZW50IERhdGE6ICIsZG9jLmRhdGEoKSk7CiAgICAgICAgICBpZiAoZG9jLmRhdGEoKS5hbGxQb3N0SXRlbXMubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgaWYgKF90aGlzMTIuYWxsUG9zdC5sZW5ndGggIT0gZG9jLmRhdGEoKS5hbGxQb3N0SXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBkb2MuZGF0YSgpLmFsbFBvc3RJdGVtcy5wb3AoKTsKCiAgICAgICAgICAgICAgX3RoaXMxMi5hbGxQb3N0LnVuc2hpZnQodGVtcCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5hbGxQb3N0ID0gZG9jLmRhdGEoKS5hbGxQb3N0SXRlbXM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiam9rZSIpLmNsaWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIHVzZXIiKTsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJMb2dpbiI7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKCmZ1bmN0aW9uIGdldFNlYXJjaFVzZXIoX3gpIHsKICByZXR1cm4gX2dldFNlYXJjaFVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldFNlYXJjaFVzZXIoKSB7CiAgX2dldFNlYXJjaFVzZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZW1haWwpIHsKICAgIHZhciBkYiwgdXNlciwgcXVlcnlTbmFwc2hvdDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZGIgPSBnZXRGaXJlc3RvcmUoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICJ1c2VycyIpKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYCR7ZG9jLmlkfSA9PiAke2RvYy5kYXRhKCkuZW1haWx9YCk7CiAgICAgICAgICAgICAgaWYgKGRvYy5kYXRhKCkuZW1haWwgPT0gZW1haWwpIHsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZG9jLmlkKTsKICAgICAgICAgICAgICAgIHVzZXIgPSB7CiAgICAgICAgICAgICAgICAgIHVpZDogZG9jLmlkLAogICAgICAgICAgICAgICAgICBlbWFpbDogZG9jLmRhdGEoKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGRvYy5kYXRhKCkudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHByb2ZpbGVQaWM6IGRvYy5kYXRhKCkucHJvZmlsZVBpYwogICAgICAgICAgICAgICAgfTsgLy9jb25zb2xlLmxvZyh0ZW1wKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB1c2VyKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfZ2V0U2VhcmNoVXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBnZXREYXRhKF94MiwgX3gzKSB7CiAgcmV0dXJuIF9nZXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXREYXRhKCkgewogIF9nZXREYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMih1aWQsIHNvdXJjZSkgewogICAgdmFyIGRiLCByZXN1bHQsIHF1ZXJ5U25hcHNob3Q7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvL2dldCBhbGwgdGFzayB0aGF0IGEgdWlkIGhhdmUgYW5kIHJldHVybiBhbiBhcnJheSBvZiB0YXNraXRlbSBvYmplY3RzCiAgICAgICAgICAgIC8vaWYgdXNlciB5ZXQgdG8gaGF2ZSBhbnkgdGFzaywgbnVsbCB3aWxsIGJlIHJldHVybmVkIAogICAgICAgICAgICBkYiA9IGdldEZpcmVzdG9yZSgpOwogICAgICAgICAgICByZXN1bHQgPSBudWxsOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBnZXREb2NzKGNvbGxlY3Rpb24oZGIsIHNvdXJjZSkpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcXVlcnlTbmFwc2hvdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZG9jLmRhdGEoKSk7CiAgICAgICAgICAgICAgaWYgKGRvYy5pZCA9PSB1aWQpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kYXRhKCk7IC8vY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCEocmVzdWx0ICE9IG51bGwgJiYgT2JqZWN0LnZhbHVlcyhyZXN1bHQpLmxlbmd0aCAhPSAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHNvdXJjZSA9PSAidGFza2xpc3QiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBPYmplY3QudmFsdWVzKHJlc3VsdC50YXNrSXRlbSkpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGlmICghKHNvdXJjZSA9PSAiZnJpZW5kcyIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0ICsgIkltaGVyZSEiKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIE9iamVjdC52YWx1ZXMocmVzdWx0Lm15RnJpZW5kcykpOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGlmICghKHNvdXJjZSA9PSAiZnJpZW5kcmVxdWVzdCIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIE9iamVjdC52YWx1ZXMocmVzdWx0LnJlcXVlc3QpKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBpZiAoIShzb3VyY2UgPT0gInBvc3QiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBPYmplY3QudmFsdWVzKHJlc3VsdC5hbGxQb3N0SXRlbXMpKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI1OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwogIHJldHVybiBfZ2V0RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiB1cGRhdGVEYlRhc2tJdGVtKF94NCwgX3g1KSB7CiAgcmV0dXJuIF91cGRhdGVEYlRhc2tJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF91cGRhdGVEYlRhc2tJdGVtKCkgewogIF91cGRhdGVEYlRhc2tJdGVtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyh1aWQsIGl0ZW1zKSB7CiAgICB2YXIgZGI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvL3VzZXIgdG8gdXBkYXRlIHRoZSBUYXNrIGl0ZW1zIHRvIHRoZSB1aWQgZ2l2ZW4KICAgICAgICAgICAgZGIgPSBnZXRGaXJlc3RvcmUoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbXMpOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBzZXREb2MoZG9jKGRiLCAidGFza2xpc3QiLCB1aWQpLCB7CiAgICAgICAgICAgICAgdGFza0l0ZW06IGl0ZW1zCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX3VwZGF0ZURiVGFza0l0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gdXBkYXRlRGJGcmllbmRzKF94NiwgX3g3KSB7CiAgcmV0dXJuIF91cGRhdGVEYkZyaWVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3VwZGF0ZURiRnJpZW5kcygpIHsKICBfdXBkYXRlRGJGcmllbmRzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCh1aWQsIGl0ZW1zKSB7CiAgICB2YXIgZGI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvL3VwZGF0ZSB1c2VyJ3MgZnJpZW5kIGxpc3QKICAgICAgICAgICAgZGIgPSBnZXRGaXJlc3RvcmUoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbXMpOwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBzZXREb2MoZG9jKGRiLCAiZnJpZW5kcyIsIHVpZCksIHsKICAgICAgICAgICAgICBteUZyaWVuZHM6IGl0ZW1zCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKICByZXR1cm4gX3VwZGF0ZURiRnJpZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBzZW5kRGJGcmllbmRSZXF1ZXN0KF94OCwgX3g5KSB7CiAgcmV0dXJuIF9zZW5kRGJGcmllbmRSZXF1ZXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9zZW5kRGJGcmllbmRSZXF1ZXN0KCkgewogIF9zZW5kRGJGcmllbmRSZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSh1cGRhdGVkUmVxdWVzdCwgZnJpZW5kKSB7CiAgICB2YXIgZGI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBkYiA9IGdldEZpcmVzdG9yZSgpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhmcmllbmQpOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBzZXREb2MoZG9jKGRiLCAiZnJpZW5kcmVxdWVzdCIsIGZyaWVuZC51aWQpLCB7CiAgICAgICAgICAgICAgcmVxdWVzdDogdXBkYXRlZFJlcXVlc3QKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwogIHJldHVybiBfc2VuZERiRnJpZW5kUmVxdWVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiB1cGRhdGVEYlBvc3QoX3gxMCkgewogIHJldHVybiBfdXBkYXRlRGJQb3N0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF91cGRhdGVEYlBvc3QoKSB7CiAgX3VwZGF0ZURiUG9zdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYocG9zdCkgewogICAgdmFyIGRiOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZGIgPSBnZXRGaXJlc3RvcmUoKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocG9zdCk7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIHNldERvYyhkb2MoZGIsICJwb3N0IiwgImFsbHBvc3QiKSwgewogICAgICAgICAgICAgIGFsbFBvc3RJdGVtczogcG9zdAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU2KTsKICB9KSk7CiAgcmV0dXJuIF91cGRhdGVEYlBvc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["Community.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div id=app class=\"container-fluid\">\r\n          <div class=\"row my-3\">\r\n              <!--api messages-->\r\n              <div id=\"joke\" class=\"col-12 text-light\" @click=\"newJoke\"><marquee behavior=\"scroll\" direction=\"left\">{{apiContent.joke}}<strong> (Click Me for New Jokes!)</strong></marquee></div>\r\n\r\n          </div>\r\n          \r\n          <div class=\"row text-center justify-content-md-center\">\r\n              <!--To do list-->\r\n              <div id=\"taskList\" class=\"col-xl-3 col-lg-3 order-lg-1 col-md-5 order-md-1\">\r\n                <div class=\"my-3\">\r\n                    <button class=\"button my-3\" @click=\"showModal = true\">New Task</button>\r\n                    <transition name=\"fade\" appear>\r\n                      <div class=\"modal-overlay\" v-if=\"showModal\" >\r\n                        <div class=\"popUp\">\r\n                            <h3>Add a New Task</h3>\r\n                            <hr>\r\n                            <div class=\"mb-4\">\r\n                              <label for=\"exampleFormControlInput1\" class=\"form-label\">Description</label>\r\n                              <input type=\"text\" id=\"\" class=\"form-control\" placeholder=\"Task Description\" v-model=\"newTaskItem.newTaskDesc\">\r\n                            </div>\r\n                            <div class=\"mb-4\">\r\n                              <label for=\"exampleFormControlInput1\" class=\"form-label\">Due Date</label>\r\n                              <input type=\"date\" id=\"\" class=\"form-control\" v-model=\"newTaskItem.newTaskDueDate\">\r\n                            </div>\r\n                            <div class=\"mb-4\">\r\n                              <label for=\"exampleFormControlInput1\" class=\"form-label\">Time (Optional)</label>\r\n                              <input type=\"time\" id=\"\" class=\"form-control\" v-model=\"newTaskItem.newTaskDueTime\">\r\n                            </div>\r\n                            <p v-if=\"newTaskError\" class=\"text-danger\">The please provide the task description and the duedate !</p>\r\n                            <hr>\r\n                            <button class=\"button mx-3\" @click=\"showModal = false; newTaskError =false\">Close</button>\r\n                            <button v-if=\"newTaskItem.newTaskDueDate != ''\" class=\"button mx-3\" @click=\"addNewTask\">Add Task</button>\r\n                            <button v-else class=\"button mx-3\" @click=\"showNewTaskError\">Add Task</button>\r\n                        </div>     \r\n                      </div>\r\n                    </transition>\r\n                </div>\r\n                <h3 class=\"text-light\">Your Task List</h3>\r\n                <hr class=\"border border-light\">\r\n                <div v-for=\"(task,key) in taskItem\" v-bind:key=\"task.taskId\" >\r\n                    <div id =\"tasks\" class=\"card mx-auto\" style=\"max-width: 75%;\">\r\n                        <div class=\"card-body text-secondary\">\r\n                          <p class=\"card-text\" >{{task.taskDesc}}</p>\r\n                          <p class=\"card-text\" >{{task.taskDue}}</p>\r\n                          <p v-if=\"task.taskTime != ''\">{{task.taskTime}}</p>\r\n                          <button type=\"button\" class=\"btn btn-success\" @click=\"removeTask(key)\">Completed</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                  \r\n              </div>\r\n\r\n              <!--Community Post-->\r\n              <div class=\"col-xl-6 col-lg-5 order-lg-2 col-md-6 order-md-3\">\r\n                <h1 class=\"text-light\">SCIS Reddit Community</h1>\r\n                <div class=\"bg-white p-3 rounded-3 bg-opacity-75\">\r\n                  <div class=\"form-group text-start mt-3\">\r\n                    <label for=\"exampleInputEmail1\">Share your thoughts</label>\r\n                    <textarea type=\"text\" class=\"form-control mt-1\" v-model=\"postMessage\" placeholder=\"Type here...\"></textarea>\r\n                    <img class=\"my-2\" style=\"dispay:none\" id=\"myimg\" src=\"\" alt=\"\">\r\n\r\n                    <button type=\"button\" class=\"btn btn-secondary mt-2\" @click=\"selectImg\">Upload Photo</button>\r\n                    <button v-if=\"photoPath\" type=\"button\" class=\"btn btn-secondary mx-2 mt-2\" @click=\"removePhoto\">Remove Photo</button>\r\n                    <input type=\"file\" id=\"hiddenSelectImg\" style=\"display:none\">\r\n                    <br>\r\n                    <small>Note: Photo file size must be smaller than 2mb !!!</small>\r\n                  </div>\r\n                  <hr>\r\n                  <p v-if=\"noPublishContent\"><small class=\"text-danger\">Please share your thoughts...</small></p>\r\n                  <button v-if=\"postMessage.trim()==''\" class=\"button \" @click=\"noPublishContent = true\">Publish</button>\r\n                  <button v-else class=\"button \" @click=\"publishPost();noPublishContent =false\">Publish</button>\r\n                 \r\n                </div>\r\n                \r\n                <div v-if=\"allPost != []\" class=\"card mb-3 rounded-5\">\r\n                  <div v-for=\"(post,key) in allPost\" v-bind:key=\"key\" class=\"bg-white p-3 rounded-3 my-2 bg-opacity-75\">\r\n                    <div class=\"card-body text-start\">\r\n                      <h5 v-if=\"post.email != user.email\" class=\"card-title\">\r\n                      <img :src=\"post.profilePic\" class=\"rounded-circle mr-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\">{{post.username}}</h5>\r\n                      <h5 v-else class=\"card-title\"><img :src=\"user.profilePic\" class=\"rounded-circle mr-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\">My post</h5>\r\n                      <img v-if=\"post.downloadUrl != ''\" :src=\"post.downloadUrl\" class=\"card-img-top mb-3\" alt=\"...\">\r\n                      <p class=\"card-text\">{{post.postMessage}}</p>\r\n                      <p class=\"card-text\"><small class=\"text-muted\">Published on: {{post.date.toString()}}</small></p>\r\n                      <ul v-for=\"(comment,ckey) in post.comments\"  v-bind:key=\"ckey\" class=\"list-group\">\r\n                        <li class=\"list-group-item\">{{comment}}</li>\r\n                      </ul>   \r\n                    </div>\r\n                    <div class=\"input-group mb-3\">\r\n                      <input type=\"text\" class=\"form-control\" placeholder=\"Your Comment...\" v-model=\"newComment\">\r\n                      <div class=\"input-group-append\">\r\n                        <button v-if=\"newComment.trim() != ''\" class=\"btn btn-outline-secondary\" type=\"button\" @click=\"processComment(key)\">Comment</button>\r\n                        <button v-else class=\"btn btn-outline-secondary\" type=\"button\" disabled>Comment</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!--Friend List-->\r\n              <div id=\"friendlisthide\" class=\"col-xl-3 col-lg-4 order-lg-3 col-md-5 order-md-2\">\r\n              <div class=\"container d-flex justify-content-center align-items-center\">\r\n                  <div class=\"card bg-white bg-opacity-75 px-5 py-2 mx-2 w-100\">\r\n                      <div class=\"text-center\">\r\n                          <h4 v-if=\"user != null\" class=\"my-1\">\r\n                            <img :src=\"user.profilePic\" class=\"rounded-circle mr-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\"> {{user.username}}</h4>\r\n                          <button class=\"button p-2\" @click=\"showProfile=true\">Profile</button>\r\n                          <div class=\"justify-content-between align-items-center mt-4 px-4 w-100\">\r\n                              <div>\r\n                                  <h6>Tasks: {{taskItem.length}}</h6>\r\n                                  <h6>Friends: {{myFriends.length}} Request: {{myFriendRequest.length}}</h6>\r\n                              </div>\r\n                        </div>\r\n                        <transition name=\"fade\" appear>\r\n                              <div class=\"modal-overlay\" v-if=\"showProfile\" >\r\n                                <div class=\"popUp\">\r\n                                  <div class=\"card-header\">\r\n                                    Profile\r\n                                  </div>\r\n                                  <div v-if=\"edit == false\" class=\"card-body\">\r\n                                       <h5 class=\"card-title\">{{user.email}}</h5>\r\n                                      <p class=\"card-text\">{{user.username}}</p>\r\n                                  </div>\r\n                                  <div v-else class=\"card-body\">\r\n                                       <h5 class=\"card-title\">{{user.email}}</h5>\r\n                                       <hr>\r\n                                       Username :\r\n                                      <input class=\"card-text mb-2\" v-model=\"newUsername\"><br>\r\n                                      <span v-if=\"newUsernameError\" class=\"text-danger\">Invalid username</span>\r\n                                      <p>Profile Picture</p>\r\n                                      <img v-for=\"(url,key) in photoLink\" v-bind:key=\"key\" :src=\"url\" class=\"editProfile rounded-circle mx-1 mt-0\" alt=\"Chris Wood\" width=\"40\" height=\"40\"\r\n                                      @click=\"selectedImg = url\"><br>\r\n                                      <div v-if=\"selectedImg != ''\">\r\n                                        <h5>New Profile Picture</h5><img :src=\"selectedImg\" class=\"rounded-circle my-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\">\r\n                                      </div>\r\n                                      <button type=\"button\" class=\"btn btn-primary\" @click=\"updateUsername\">Update</button>\r\n                                      <hr>\r\n                                      Change Password (Optional)\r\n                                      <br>\r\n                                      <input class=\"my-2\" type=\"password\" v-model=\"oldPw\" placeholder=\"Old Password\">\r\n                                      <input class=\"mb-2\" type=\"password\" v-model=\"newPw\" placeholder=\"New Password\"><br>\r\n                                      <span v-if=\"updatePasswordError\" class=\"text-danger\">Wrong Password</span><br>\r\n                                      <button type=\"button\" class=\"btn btn-primary\" @click=\"changePassword\">Change Password</button>\r\n                                  </div>\r\n                                  \r\n                                  <hr>\r\n                                  <button class=\"button px-4 mx-4\" @click=\"edit=true\">Edit</button>\r\n                                  <button class=\"button px-4 mx-4\" @click=\"showProfile=false;newUsernameError=false;updatePasswordError=false\">Close</button>\r\n                                </div>     \r\n                              </div>\r\n                        </transition>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n                <h3 class=\"text-light fw-bold\">Friends</h3>\r\n                <hr class=\"border border-light\">\r\n                <ul v-if=\"myFriends.length !=0\" class=\"list-group\">\r\n                    <li v-for=\"(friend,key) in myFriends\" class=\"list-group-item list-group-item-info text-start\" id=\"listfriend\" v-bind:key=\"key\" @click=\"showFriendInfo=true;getFriendInfo(friend)\">\r\n                      <img :src=\"friend.profilePic\" class=\"rounded-circle mr-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\">\r\n                        {{friend.username}}</li>\r\n                </ul>\r\n                <p v-else class=\"text-light\">Add your first friend!</p>\r\n                 <transition name=\"fade\" appear>\r\n                      <div class=\"modal-overlay\" v-if=\"showFriendInfo\" >\r\n                        <div class=\"popUp\">\r\n                          <div class=\"card-header\">\r\n                            Friend Info\r\n                          </div>\r\n                          <div class=\"card-body\">\r\n                            <h5 class=\"card-title\">{{friendInfo.username}}</h5>\r\n                            <p class=\"card-text\">{{friendInfo.email}}</p>\r\n                            <button type=\"button\" class=\"btn btn-primary m-1\" @click=\"toMessage\">Message</button>\r\n                            <button type=\"button\" class=\"btn btn-outline-danger m-1\" @click=\"deleteFriend(friendInfo);friendInfo=null;showFriendInfo=false\" >Delete</button>\r\n                          </div>\r\n                          \r\n                          <hr >\r\n                            <button class=\"button mx-3\" @click=\"showFriendInfo = false;\">Close</button>\r\n                        </div>     \r\n                      </div>\r\n                </transition>\r\n                <hr class=\"border border-light\">\r\n                <p class=\"text-light fw-bold\">Friend Request</p>\r\n                <ul v-if=\"myFriendRequest.length != 0\" class=\"list-group\">\r\n                    <li v-for=\"(request,key) in myFriendRequest\" class=\"list-group-item list-group-item-info\" v-bind:key=\"key\">{{request.username}}\r\n                      <br>\r\n                      <button type=\"button\" class=\"btn btn-outline-danger m-1\" @click=\"processFriendRequest(request,key,false)\">Reject</button>\r\n                      <button type=\"button\" class=\"btn btn-outline-success m-1\" @click=\"processFriendRequest(request,key,true)\">Accept</button>\r\n                    </li>\r\n                </ul>\r\n                <p v-else class=\"text-light\">No request...</p>\r\n                <hr class=\"border border-light\">\r\n                <button class=\"button my-3\" @click=\"showSearchFriend=true\">New Friend</button>\r\n                <transition name=\"fade\" appear>\r\n                      <div class=\"modal-overlay\" v-if=\"showSearchFriend\" >\r\n                        <div class=\"popUp\">\r\n                            <h3 class=\"text-dark\">Search for a Friend</h3>\r\n                            <hr>\r\n                            <div class=\"input-group mb-3\">\r\n                              <input type=\"text\" class=\"form-control\" placeholder=\"Enter an email\" v-model=\"searchEmail\">\r\n                              <button class=\"btn btn-outline-secondary\" type=\"button\" id=\"button-addon2\" @click=\"findUser\">Search</button>\r\n                            </div>\r\n                            \r\n                            <div v-if=\"searchUser != null && searchUser !=false\" class=\"card\">\r\n                              <hr>\r\n                                <div class=\"card-header\">\r\n                                  Result\r\n                                </div>\r\n                                <div class=\"card-body\">\r\n                                  <h5 class=\"card-title\">{{searchUser.username}}</h5>\r\n                                  <p class=\"card-text\">{{searchUser.email}}</p>\r\n                                  <button v-if=\"searchUser.email == user.email\" class=\"button mx-3\" disabled>Yourself</button>\r\n                                  <button v-else-if=\"(myFriends.filter((item,key)=>item.email == searchUser.email)).length != 0\" class=\"btn btn-outline-danger m-3\" @click=\"deleteFriend(searchUser)\">Delete Friend</button>\r\n                                  <button v-else class=\"button mx-3\" @click=\"sendFriendRequest\">Add Friend</button>\r\n                                </div>\r\n                            </div>\r\n                            <p v-if=\"searchUser ==false\">No such user...</p>\r\n                            <hr>\r\n                            <button class=\"button mx-3\" @click=\"showSearchFriend = false; searchUser=null; searchEmail=''\">Close</button>\r\n                        </div>     \r\n                      </div>\r\n                </transition>\r\n              </div>\r\n          </div>\r\n      </div>\r\n</template>\r\n<script>\r\n// <template>\r\n//   <div id=\"app\">\r\n//     <div id=\"nav\">\r\n//       <router-link to=\"/\">Home</router-link> |\r\n//       <router-link to=\"/about\">About</router-link>\r\n//     </div>\r\n//     <router-view/>\r\n//   </div>\r\n// </template>\r\n//<HelloWorld msg=\"Welcome to Your Vue.js App\"/>\r\n//import HelloWorld from './components/HelloWorld.vue'\r\nimport { getAuth , onAuthStateChanged, signInWithEmailAndPassword,updatePassword} from \"firebase/auth\";\r\nimport { getDocs ,getFirestore ,collection, setDoc ,doc,onSnapshot} from \"firebase/firestore\"; \r\nimport {getStorage , ref, uploadBytes, getDownloadURL} from \"firebase/storage\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: 'app',\r\n  data(){\r\n    return {\r\n      taskItem:[\r\n          // {\r\n          //   taskId : 1,\r\n          //   taskDesc: \"This is task 1\",\r\n          //   taskDue: \"11/8/2021\",\r\n          //   taskTime: \"\"\r\n          // },\r\n          // {\r\n          //   taskId : 2,\r\n          //   taskDesc: \"This is task 2\",\r\n          //   taskDue: \"11/8/2021\",\r\n          //   taskTime: \"\"\r\n          // }\r\n      ],\r\n      newTaskItem:{\r\n\r\n        newTaskDesc : \"\",\r\n        newTaskDueDate : \"\",\r\n        newTaskDueTime : \"\",\r\n        \r\n      },\r\n      //modals \r\n      showModal : false, //for new task\r\n      showSearchFriend : false,\r\n      showFriendInfo: false,\r\n      showProfile :false,\r\n\r\n      //search\r\n      searchEmail : \"\",\r\n      searchUser : null,\r\n\r\n      //errors\r\n      newTaskError: false,\r\n\r\n      //friends\r\n      myFriends: [],\r\n      myFriendRequest :[],\r\n      friendInfo : null,\r\n      photoLink : [\r\n      \"https://bootdey.com/img/Content/avatar/avatar1.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar2.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar3.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar4.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar5.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar6.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar7.png\",\r\n      \"https://bootdey.com/img/Content/avatar/avatar8.png\"\r\n      ],\r\n      //currentUser\r\n      user : null,\r\n\r\n      //community post\r\n      photoPath : null,\r\n      postMessage : \"\",\r\n      allPost : [],\r\n      myPost: 0,\r\n      pictUrl : \"\",\r\n      noPublishContent: false,\r\n      //Comment\r\n      newComment : \"\",\r\n\r\n      //changePassword\r\n      edit : false,\r\n      saveBtn : false,\r\n      oldPw : \"\",\r\n      newPw : \"\",\r\n      newUsername : \"\",\r\n      newUsernameError : false,\r\n      updatePasswordError : false,\r\n      selectedImg : \"\",\r\n\r\n      //api content\r\n      apiContent : \"\"\r\n    }\r\n  },\r\n  components: {\r\n    //HelloWorld,\r\n  },\r\n  methods:{\r\n    addNewTask(){\r\n      console.log(this.newTaskItem)\r\n      var item = {\r\n            //taskId : this.taskItem.length + 1,\r\n            taskDesc: this.newTaskItem.newTaskDesc,\r\n            taskDue: this.newTaskItem.newTaskDueDate,\r\n            taskTime: this.newTaskItem.newTaskDueTime\r\n      }\r\n\r\n      this.taskItem.push(item)\r\n      this.showModal = false;\r\n\r\n      //update the database\r\n      var updatedItem = Object.assign({}, this.taskItem);\r\n      //console.log(updatedItem);\r\n      var promise = updateDbTaskItem(this.userUid,updatedItem);\r\n      promise.then(()=>{\r\n        console.log(\"Success\");\r\n        this.newTaskItem.newTaskDesc = \"\";\r\n        this.newTaskItem.newTaskDueDate = \"\";\r\n        this.newTaskItem.newTaskDueTime = \"\";\r\n        this.newTaskError = false;\r\n      })\r\n      \r\n    },\r\n    removeTask(id){\r\n      this.taskItem = this.taskItem.filter((item,key)=>key != id);\r\n            //update the database\r\n      var updatedItem = Object.assign({}, this.taskItem);\r\n      //console.log(updatedItem);\r\n      var promise = updateDbTaskItem(this.userUid,updatedItem);\r\n      promise.then(()=>{\r\n        console.log(\"Success\");\r\n        this.newTaskItem.newTaskDesc = \"\";\r\n        this.newTaskItem.newTaskDueDate = \"\";\r\n        this.newTaskItem.newTaskDueTime = \"\";\r\n        this.newTaskError = false;\r\n      })\r\n    },\r\n    showNewTaskError(){\r\n      this.newTaskError = true;\r\n    },\r\n    findUser(){\r\n      console.log(this.searchEmail);\r\n      var userInfo = getSearchUser(this.searchEmail);\r\n      userInfo.then((user)=>{\r\n        if(user){\r\n          this.searchUser = user;\r\n        }else{\r\n          this.searchUser = false;\r\n        }\r\n        \r\n      });\r\n    },\r\n    sendFriendRequest(){\r\n      // console.log(this.searchUser);\r\n      // console.log(this.user)\r\n      var updatedRequest = [];\r\n      var allRequest = getData(this.searchUser.uid,\"friendrequest\");\r\n        allRequest.then((result)=>{\r\n          if(result != null){\r\n            if(result.length != 0){\r\n              result = Object.values(result);\r\n              console.log(result);\r\n              for(let item of result){\r\n                //console.log(item)\r\n                var temp = {\r\n                  uid : item.uid,\r\n                  email : item.email,\r\n                  username : item.username\r\n                }\r\n                updatedRequest.push(temp);\r\n              }\r\n              updatedRequest.push(this.user);\r\n            }else{\r\n              updatedRequest.push(this.user);\r\n              console.log(\"No request\")\r\n            } \r\n          }else{\r\n            updatedRequest.push(this.user);\r\n            console.log(\"No request list\");\r\n          }\r\n          var response = sendDbFriendRequest(updatedRequest,this.searchUser);\r\n          response.then(()=>{\r\n              console.log(\"friend request send\");\r\n          });\r\n        }); \r\n\r\n    },\r\n    processFriendRequest(friend,id,action){\r\n      //action true -> accept\r\n      //action false -> reject\r\n      this.myFriendRequest = this.myFriendRequest.filter((request,key)=>key != id);\r\n\r\n      //update the database\r\n      //var updateRequest = Object.assign({},this.myFriendRequest);\r\n      var promise = sendDbFriendRequest(this.myFriendRequest,this.user);\r\n      promise.then(()=>{\r\n        if(action == true){\r\n          console.log(\"Friend Request accepted !\");\r\n          this.myFriends.push(friend);\r\n\r\n          //update database friend list for current user\r\n          var items = updateDbFriends(this.user.uid,this.myFriends);\r\n          items.then(()=>{\r\n            console.log(\"Friend list updated!\");\r\n          });\r\n          //update database friend list for friend\r\n          var updatedFriendListItems =[];\r\n          var friendListItems = getData(friend.uid,\"friends\");\r\n          friendListItems.then((result)=>{\r\n          if(result != null){\r\n            if(result.length != 0){\r\n              result = Object.values(result);\r\n              //console.log(result);\r\n              for(let item of result){\r\n                //console.log(item)\r\n                var temp = {\r\n                  uid : item.uid,\r\n                  email : item.email,\r\n                  username : item.username,\r\n                  profilePic : item.profilePic\r\n                }\r\n                updatedFriendListItems.push(temp);\r\n              }\r\n              updatedFriendListItems.push(this.user)\r\n            }else{\r\n              updatedFriendListItems.push(this.user)\r\n              console.log(\"No Friends\")\r\n            }\r\n            \r\n          }else{\r\n            updatedFriendListItems.push(this.user)\r\n            console.log(\"No Friendlist\");\r\n          }\r\n          items = updateDbFriends(friend.uid,updatedFriendListItems);\r\n          items.then(()=>{\r\n            console.log(\"Friend list updated!\");\r\n          });\r\n        }); \r\n\r\n        }else{\r\n          console.log(\"Friend Request rejected !\");\r\n        }\r\n      });\r\n    },\r\n    deleteFriend(unfriend){\r\n      this.myFriends = this.myFriends.filter((friend)=>friend.email != unfriend.email);\r\n\r\n      //delete for current user\r\n      var promise = updateDbFriends(this.user.uid,this.myFriends);\r\n      promise.then(()=>{\r\n        console.log(\"Friend list updated!\");\r\n\r\n          //get target unfriend\r\n          var updatedFriendListItems =[];\r\n          var friendListItems = getData(unfriend.uid,\"friends\");\r\n          friendListItems.then((result)=>{\r\n          if(result != null){\r\n            if(result.length != 0){\r\n              result = Object.values(result);\r\n              //console.log(result);\r\n              for(let item of result){\r\n                //console.log(item)\r\n                if(item.email != this.user.email){\r\n                  var temp = {\r\n                    uid : item.uid,\r\n                    email : item.email,\r\n                    username : item.username\r\n                  }\r\n                  updatedFriendListItems.push(temp);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          var items = updateDbFriends(unfriend.uid,updatedFriendListItems);\r\n          items.then(()=>{\r\n            console.log(\"Friend list updated!\");\r\n          });\r\n        });\r\n      });\r\n    },\r\n    getFriendInfo(friend){\r\n        this.friendInfo = friend;\r\n    },\r\n    selectImg(){\r\n      // var ImgName, ImgUrl;\r\n    \r\n      // var reader = new FileReader();\r\n      var input = document.getElementById(\"hiddenSelectImg\");\r\n      \r\n      input.onchange = e =>{\r\n        var files = e.target.files;\r\n        var reader = new FileReader();\r\n        reader.onload = function(){\r\n          document.getElementById(\"myimg\").src = reader.result;\r\n          document.getElementById(\"myimg\").style = \"display:block;height:100px;width:100px; border:1px solid black\";\r\n        }\r\n        //console.log(files[0].name);\r\n        this.photoPath = files[0];\r\n        reader.readAsDataURL(files[0]);\r\n      }\r\n      input.click();\r\n    },\r\n    publishPost(){\r\n\r\n      var downloadUrl = \"\";\r\n      var storage = getStorage();\r\n      if(this.photoPath != null){\r\n        \r\n        downloadUrl = \"images/\"+this.photoPath.name;\r\n        var photoRef = ref(storage,downloadUrl);\r\n        \r\n        uploadBytes(photoRef,this.photoPath).then((snapshot)=>{\r\n          console.log(snapshot);\r\n        });\r\n\r\n      }\r\n      var getUrl = getDownloadURL(ref(storage,downloadUrl));\r\n      getUrl.then((url)=>{\r\n          var newPost = {\r\n          downloadUrl : url,\r\n          postMessage : this.postMessage,\r\n          uid : this.user.uid,\r\n          email : this.user.email,\r\n          username : this.user.username,\r\n          date : new Date().toDateString(),\r\n          comments : [],\r\n          profilePic : this.user.profilePic\r\n        }\r\n        this.processPublish(newPost);\r\n      }).catch(()=>{\r\n          var newPost = {\r\n          downloadUrl : \"\",\r\n          postMessage : this.postMessage,\r\n          uid : this.user.uid,\r\n          email : this.user.email,\r\n          username : this.user.username,\r\n          date : new Date().toDateString(),\r\n          comments : [],\r\n          profilePic : this.user.profilePic\r\n        }\r\n        this.processPublish(newPost);\r\n      });     \r\n    },\r\n    removePhoto(){\r\n      this.photoPath = null;\r\n      this.pictUrl = \"\";\r\n      document.getElementById(\"myimg\").src = \"\";\r\n      document.getElementById(\"myimg\").style = \"display:none;\";\r\n    },\r\n    processPublish(newPost){\r\n      var updatePost = []\r\n      var items = getData(\"allpost\",\"post\");\r\n      items.then((result)=>{\r\n          if(result != null){\r\n            if(result.length != 0){\r\n              result = Object.values(result);\r\n              //console.log(result);\r\n              for(let item of result){\r\n                //console.log(item)\r\n                var temp = {\r\n                  downloadUrl : item.downloadUrl,\r\n                  postMessage : item.postMessage,\r\n                  uid : item.uid,\r\n                  email : item.email,\r\n                  username : item.username,\r\n                  date : item.date,\r\n                  profilePic : item.profilePic\r\n                }\r\n                updatePost.push(temp);\r\n              }\r\n            }else{\r\n              console.log(\"No Friends\")\r\n            }\r\n            \r\n          }else{\r\n            console.log(\"No Friendlist\");\r\n          }\r\n          updatePost.push(newPost);\r\n          var promise = updateDbPost(updatePost);\r\n          promise.then(()=>{\r\n            console.log(\"Post Updated\");\r\n          })\r\n      }); \r\n      this.photoPath = null;\r\n      this.postMessage  = \"\";\r\n      this.pictUrl = \"\";\r\n      //this.allPost.unshift(newPost);\r\n      document.getElementById(\"myimg\").src = \"\";\r\n      document.getElementById(\"myimg\").style = \"display:none;\";\r\n    },\r\n    processComment(key){\r\n      this.allPost[key].comments.push(this.newComment);\r\n      var temp = this.allPost;\r\n      updateDbPost(temp).then(()=>{\r\n        console.log(\"Comment updated\");\r\n      });\r\n      this.newComment = \"\";\r\n    },\r\n    updateUsername(){\r\n      this.newUsernameError = false;\r\n      var db = getFirestore();\r\n      var userRef = doc(db,\"users\",this.user.uid);\r\n\r\n      if(this.newUsername.trim()==\"\"){\r\n        if(this.selectedImg != \"\"){\r\n            setDoc(userRef,{profilePic:this.selectedImg},{merge:true}).then(()=>{\r\n            console.log(\"Username updated\");\r\n            this.user.profilePic = this.selectedImg;\r\n            this.selectedImg = \"\";\r\n            this.showProfile = false;\r\n          });\r\n          return;\r\n        }\r\n        this.newUsernameError = true;\r\n        return;\r\n      }\r\n\r\n\r\n        setDoc(userRef,{username:this.newUsername},{merge:true}).then(()=>{\r\n        console.log(\"Username updated\");\r\n        this.user.username = this.newUsername;\r\n        this.newUsername = \"\";\r\n        this.showProfile = false;\r\n      });\r\n\r\n    },\r\n    changePassword(){\r\n      var auth = getAuth();\r\n      signInWithEmailAndPassword(auth,this.user.email,this.oldPw).then(()=>{\r\n          //correct password\r\n          var user = auth.currentUser;\r\n          updatePassword(user,this.newPw).then(()=>{\r\n            console.log(\"Password updated\");\r\n            this.newPw = \"\";\r\n            this.oldPw = \"\";\r\n          });\r\n      }).catch(()=>{\r\n          this.updatePasswordError = true;\r\n          this.newPw = \"\";\r\n          this.oldPw = \"\";\r\n      })\r\n    },\r\n    toMessage(){\r\n        window.location.href = \"Messages\";\r\n    },\r\n    newJoke(){\r\n      axios.get(\"https://geek-jokes.sameerkumar.website/api?format=json\")\r\n      .then(resp=>{\r\n        this.apiContent = resp.data\r\n      }).catch(e=>{\r\n        this.apiContent = e;\r\n      });\r\n    }\r\n  },\r\n  beforeCreate(){\r\n    const auth = getAuth();\r\n    onAuthStateChanged(auth, (user) => {\r\n    if (user) {\r\n        // User is signed in, see docs for a list of available properties\r\n        // https://firebase.google.com/docs/reference/js/firebase.User\r\n        //console.log(user.email);\r\n        var userInfo = getSearchUser(user.email);\r\n        userInfo.then((user)=>{\r\n          this.user=user;\r\n        });\r\n        this.userUid = user.uid; //log the uid in vue\r\n\r\n        //Start getting tasklist\r\n        var items = getData(this.userUid,\"tasklist\"); \r\n        items.then((result)=>{ //handles the promise\r\n          //console.log(result);\r\n          if(result != null){\r\n            if(result.length !=0){\r\n              result = Object.values(result);\r\n              //console.log(result);\r\n              for(let item of result){\r\n              //console.log(item);\r\n              var temp = {\r\n                taskDesc: item.taskDesc,\r\n                taskDue: item.taskDue,\r\n                taskTime: item.taskTime\r\n              }\r\n              this.taskItem.push(temp); // push the item into vue data\r\n            }\r\n            }else{\r\n              console.log(\"No Item\")\r\n            }\r\n          }else{\r\n            console.log(\"no task yet\");\r\n          }\r\n\r\n         });//end get tasklist items\r\n\r\n         //start getting friend list\r\n        // items = getData(user.uid,\"friends\");\r\n        // items.then((result)=>{\r\n        //   if(result != null){\r\n        //     if(result.length != 0){\r\n        //       result = Object.values(result);\r\n        //       //console.log(result);\r\n        //       for(let item of result){\r\n        //         //console.log(item)\r\n        //         getSearchUser(item.email).then((user)=>{\r\n        //             var temp = {\r\n        //             uid : user.uid,\r\n        //             email : user.email,\r\n        //             username : user.username,\r\n        //             profilePic : user.profilePic\r\n        //             }\r\n        //             console.log(\"Updating friend list\")\r\n        //             this.myFriends.push(temp);\r\n        //         });\r\n        //       }\r\n        //     }else{\r\n        //       console.log(\"No Friends\")\r\n        //     }\r\n            \r\n        //   }else{\r\n        //     console.log(\"No Friendlist\");\r\n        //   }\r\n        // }); //end getting friend list\r\n        \r\n        //start getting friend request\r\n        // items = getData(this.userUid,\"friendrequest\");\r\n        // items.then((result)=>{\r\n        //   if(result != null){\r\n        //     if(result.length != 0){\r\n        //       result = Object.values(result);\r\n        //       //console.log(result);\r\n        //       for(let item of result){\r\n        //         //console.log(item)\r\n        //         getSearchUser(item.email).then((user)=>{\r\n        //             var temp = {\r\n        //             uid : user.uid,\r\n        //             email : user.email,\r\n        //             username : user.username,\r\n        //             profilePic : user.profilePic\r\n        //             }\r\n        //             this.myFriendRequest.push(temp);\r\n        //         });\r\n\r\n        //       }\r\n        //     }else{\r\n        //       console.log(\"No Request\")\r\n        //     }\r\n            \r\n        //   }else{\r\n        //     console.log(\"No request list\");\r\n        //   }\r\n        // });\r\n        //start getting all post\r\n        items = getData(\"allpost\",\"post\");\r\n        items.then((result)=>{\r\n          if(result != null){\r\n            if(result.length != 0){\r\n              result = Object.values(result);\r\n              //console.log(result);\r\n              for(let item of result){\r\n                //console.log(item)\r\n                var comment = [];\r\n                if(item.comments != null){\r\n                    comment = Object.values(item.comments);\r\n                }\r\n                var temp = {\r\n                  downloadUrl : item.downloadUrl,\r\n                  postMessage : item.postMessage,\r\n                  uid : item.uid,\r\n                  email : item.email,\r\n                  username : item.username,\r\n                  date : item.date,\r\n                  comments : comment,\r\n                  profilePic:item.profilePic\r\n                }\r\n                this.allPost.unshift(temp);\r\n\r\n              }\r\n            }else{\r\n              console.log(\"No Post\")\r\n            }\r\n            \r\n          }else{\r\n            console.log(\"No post list\");\r\n          }\r\n        });\r\n        // ...\r\n        //real time lsiten to friends list\r\n        var db = getFirestore();\r\n        onSnapshot(doc(db, \"friends\",user.uid),(doc)=>{\r\n            //console.log(\"Current Data: \",doc.data());\r\n            if(doc.data()){\r\n                this.myFriends = [];\r\n                var temp = doc.data().myFriends\r\n                for(let f of temp){\r\n                  getSearchUser(f.email).then((user)=>{\r\n                      this.myFriends.push(user)\r\n                  });\r\n                }\r\n            }\r\n        });\r\n        //real time listen to friendrequest \r\n        onSnapshot(doc(db, \"friendrequest\",user.uid),(doc)=>{\r\n            //console.log(\"Current Data: \",doc.data());\r\n            if(doc.data()){\r\n                this.myFriendRequest = [];\r\n                var temp = doc.data().request\r\n                for(let f of temp){\r\n                  getSearchUser(f.email).then((user)=>{\r\n                      this.myFriendRequest.push(user)\r\n                  });\r\n                }\r\n            \r\n            }\r\n        });\r\n        //real time listen to post\r\n        onSnapshot(doc(db, \"post\",\"allpost\"),(doc)=>{\r\n            //console.log(\"Current Data: \",doc.data());\r\n            if(doc.data().allPostItems.length !=0){\r\n                if(this.allPost.length != doc.data().allPostItems.length){\r\n                  var temp = doc.data().allPostItems.pop()\r\n                  this.allPost.unshift(temp);\r\n                }else{\r\n                  this.allPost = doc.data().allPostItems;\r\n                }\r\n            }\r\n        });\r\n        document.getElementById(\"joke\").click()\r\n    }else{\r\n      console.log(\"No user\");\r\n      window.location.href=\"Login\";\r\n    }\r\n    });\r\n  },\r\n}\r\nasync function getSearchUser(email){\r\n    var db = getFirestore();\r\n    var user\r\n    const querySnapshot = await getDocs(collection(db, \"users\"));\r\n    querySnapshot.forEach((doc) => {\r\n    //console.log(`${doc.id} => ${doc.data().email}`);\r\n    if(doc.data().email == email){\r\n      //console.log(doc.id);\r\n      user = {\r\n        uid : doc.id,\r\n        email : doc.data().email,\r\n        username : doc.data().username,\r\n        profilePic : doc.data().profilePic\r\n      }\r\n      //console.log(temp);\r\n      \r\n    }\r\n});\r\n    return user;\r\n}\r\nasync function  getData(uid,source){\r\n    //get all task that a uid have and return an array of taskitem objects\r\n    //if user yet to have any task, null will be returned \r\n    var db = getFirestore();\r\n    var result = null;\r\n    const querySnapshot = await getDocs(collection(db, source));\r\n    querySnapshot.forEach((doc) => {\r\n    //console.log(doc.data());\r\n    if(doc.id == uid){\r\n        result = doc.data();\r\n        //console.log(result);\r\n    }\r\n\r\n    });\r\n    if(result != null && Object.values(result).length != 0){\r\n      if(source == \"tasklist\"){\r\n        return Object.values(result.taskItem);\r\n      }else if(source == \"friends\"){\r\n        console.log(result+\"Imhere!\")\r\n        return Object.values(result.myFriends);\r\n      }else if(source == \"friendrequest\"){\r\n        return Object.values(result.request);\r\n      }else if(source == \"post\"){\r\n        return Object.values(result.allPostItems);\r\n      }\r\n    \r\n    }\r\n    else{\r\n      return result;\r\n    }\r\n  \r\n}\r\nasync function updateDbTaskItem(uid,items){\r\n    //user to update the Task items to the uid given\r\n    var db = getFirestore();\r\n    console.log(items)\r\n    await setDoc(doc(db,\"tasklist\",uid),{\r\n      taskItem : items\r\n    });\r\n}\r\nasync function updateDbFriends(uid,items){\r\n    //update user's friend list\r\n    var db = getFirestore();\r\n    console.log(items)\r\n    await setDoc(doc(db,\"friends\",uid),{\r\n      myFriends : items\r\n    });\r\n}\r\nasync function sendDbFriendRequest(updatedRequest,friend){\r\n    var db = getFirestore();\r\n    console.log(friend);\r\n    await setDoc(doc(db,\"friendrequest\",friend.uid),{\r\n      request : updatedRequest\r\n    });\r\n}\r\nasync function updateDbPost(post){\r\n    var db = getFirestore();\r\n    console.log(post)\r\n    await setDoc(doc(db,\"post\",\"allpost\"),{\r\n      allPostItems : post\r\n    });\r\n    \r\n}\r\n</script>\r\n<style>\r\n#tasks{\r\n  background-image: linear-gradient(to right, #ffc107,#f5d77c);\r\n}\r\n#listfriend:hover{\r\n  background-color: aqua;\r\n}\r\n.button{\r\n  appearance: none;\r\n  outline: none;\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n\r\n  display: inline-block;\r\n  padding: 15px 25px;\r\n  background-image: linear-gradient(to right, #20c997,#16e6a7);\r\n  border-radius: 8px;\r\n  color: rgb(83, 72, 72);\r\n  font-size: 19px;\r\n  font-weight: 700;\r\n\r\n  box-shadow: 3px 3px rgba(0, 0, 0, 0.4);\r\n  transition: 0.4s ease-out;\r\n\r\n}\r\n.button:hover{\r\n  box-shadow: 6px 6px rgba(0, 0, 0, 0.6);\r\n}\r\n.modal-overlay{\r\n  position:fixed;\r\n  top:0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 98;\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n}\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.5s;;\r\n}\r\n.fade-enter,\r\n.fade-leave-to{\r\n  opacity: 0;\r\n}\r\n\r\n.popUp{\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%,-50%);\r\n  z-index: 99;\r\n\r\n  width: 100%;\r\n  max-width: 400px;\r\n  background-color:#fff;\r\n  border-radius: 16px;\r\n\r\n  padding: 25px;\r\n}\r\n.editProfile:hover{\r\n  border: 3px solid greenyellow;\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n@media only screen and (max-width: 789px) {\r\n  #friendlisthide{\r\n    display: none;\r\n  }\r\n}\r\n#joke:hover{\r\n  font-size: 20px;\r\n}\r\n\r\n</style>"],"sourceRoot":"src/views"}]}