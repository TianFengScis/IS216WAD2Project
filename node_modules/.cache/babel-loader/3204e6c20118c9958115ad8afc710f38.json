{"remainingRequest":"/Users/tianfeng/Desktop/Final/app/node_modules/babel-loader/lib/index.js!/Users/tianfeng/Desktop/Final/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tianfeng/Desktop/Final/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tianfeng/Desktop/Final/app/src/views/Messaging.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tianfeng/Desktop/Final/app/src/views/Messaging.vue","mtime":1636857264309},{"path":"/Users/tianfeng/Desktop/Final/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tianfeng/Desktop/Final/app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tianfeng/Desktop/Final/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tianfeng/Desktop/Final/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90aWFuZmVuZy9EZXNrdG9wL0ZpbmFsL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvdGlhbmZlbmcvRGVza3RvcC9GaW5hbC9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRBdXRoLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tICJmaXJlYmFzZS9hdXRoIjsKaW1wb3J0IHsgZ2V0RmlyZXN0b3JlLCBkb2MsIGdldERvY3MsIGNvbGxlY3Rpb24sIG9uU25hcHNob3QsIHNldERvYyB9IGZyb20gJ0BmaXJlYmFzZS9maXJlc3RvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2FwcCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICB1aWQ6ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcHJvZmlsZVBpYzogIiIKICAgICAgfSwKICAgICAgbXlGcmllbmRzOiBbXSwKICAgICAgaW5wdXRNZXNzYWdlOiAiIiwKICAgICAgc2hvd01lc3NhZ2U6IFtdLAogICAgICBjdXJyZW50Q2hhdEZyaWVuZDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE1lc3NhZ2U6IGZ1bmN0aW9uIGdldE1lc3NhZ2UoZnJpZW5kKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNob3dNZXNzYWdlID0gW107CiAgICAgIHRoaXMuY3VycmVudENoYXRGcmllbmQgPSBmcmllbmQ7CiAgICAgIHZhciBkYiA9IGdldEZpcmVzdG9yZSgpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXIudWlkKTsKICAgICAgb25TbmFwc2hvdChkb2MoZGIsICJtZXNzYWdlcyIsIHRoaXMudXNlci51aWQgKyBmcmllbmQudWlkKSwgZnVuY3Rpb24gKGRvYykgewogICAgICAgIGNvbnNvbGUubG9nKCJDdXJyZW50IERhdGE6ICIsIGRvYy5kYXRhKCkpOwoKICAgICAgICBpZiAoZG9jLmRhdGEoKSkgewogICAgICAgICAgX3RoaXMuc2hvd01lc3NhZ2UgPSBkb2MuZGF0YSgpLmNoYXRzOwogICAgICAgICAgc2V0VGltZW91dChfdGhpcy5zY3JvbGxUb0JvdHRvbSwgMTAwMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaW5wdXRNZXNzYWdlLnRyaW0oKSA9PSAiIikgewogICAgICAgIHJldHVybjsKICAgICAgfSAvL3ZhciBkYiA9IGdldEZpcmVzdG9yZSgpOwoKCiAgICAgIHZhciBuZXdBbGxNZXNzYWdlID0gW107CiAgICAgIHZhciBuZXdNc2cgPSB7CiAgICAgICAgc2VuZGVyOiB0aGlzLnVzZXIudWlkLAogICAgICAgIG1lc3NhZ2U6IHRoaXMuaW5wdXRNZXNzYWdlLAogICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCkKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coIk5ldyBtZXNzYWdlOiIsIG5ld01zZyk7CiAgICAgIHZhciBhbGxNZXNzYWdlID0gZ2V0RGF0YSh0aGlzLnVzZXIudWlkICsgdGhpcy5jdXJyZW50Q2hhdEZyaWVuZC51aWQsICJtZXNzYWdlcyIpOwogICAgICBhbGxNZXNzYWdlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewogICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggIT0gMCkgewogICAgICAgICAgICByZXN1bHQgPSBPYmplY3QudmFsdWVzKHJlc3VsdCk7IC8vY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXN1bHQpLAogICAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtKQogICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgIHNlbmRlcjogaXRlbS5zZW5kZXIsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGl0ZW0ubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgZGF0ZTogaXRlbS5kYXRlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbmV3QWxsTWVzc2FnZS5wdXNoKHRlbXApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiTm8gY2hhdCIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTm8gY2hhdCBsaXN0Iik7CiAgICAgICAgfQoKICAgICAgICBuZXdBbGxNZXNzYWdlLnB1c2gobmV3TXNnKTsKCiAgICAgICAgdmFyIHVwZGF0ZSA9IF9zZW5kTWVzc2FnZShfdGhpczIuY3VycmVudENoYXRGcmllbmQsIF90aGlzMi51c2VyLCBuZXdBbGxNZXNzYWdlKTsKCiAgICAgICAgdXBkYXRlLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coImNoYXQgdXBkYXRlZCIpOwoKICAgICAgICAgIHZhciB1cGRhdGVGcmllbmQgPSBfc2VuZE1lc3NhZ2UoX3RoaXMyLnVzZXIsIF90aGlzMi5jdXJyZW50Q2hhdEZyaWVuZCwgbmV3QWxsTWVzc2FnZSk7CgogICAgICAgICAgdXBkYXRlRnJpZW5kLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiZnJpZW5kIGNoYXQgdXBkYXRlZCIpOwogICAgICAgICAgICBfdGhpczIuaW5wdXRNZXNzYWdlID0gIiI7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2Nyb2xsVG9Cb3R0b206IGZ1bmN0aW9uIHNjcm9sbFRvQm90dG9tKCkgewogICAgICB2YXIgbXlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdEhpc3RvcnkiKTsKICAgICAgbXlEaXYuc2Nyb2xsVG9wID0gbXlEaXYuc2Nyb2xsSGVpZ2h0OwogICAgfQogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB2YXIgYXV0aCA9IGdldEF1dGgoKTsKICAgIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBmdW5jdGlvbiAodXNlcikgewogICAgICBpZiAodXNlcikgewogICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluLCBzZWUgZG9jcyBmb3IgYSBsaXN0IG9mIGF2YWlsYWJsZSBwcm9wZXJ0aWVzCiAgICAgICAgLy8gaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvcmVmZXJlbmNlL2pzL2ZpcmViYXNlLlVzZXIKICAgICAgICAvL2NvbnNvbGUubG9nKHVzZXIudWlkKTsKICAgICAgICBnZXRTZWFyY2hVc2VyKHVzZXIuZW1haWwpLnRoZW4oZnVuY3Rpb24gKGN1cnJlbnRVc2VyKSB7CiAgICAgICAgICBfdGhpczMudXNlciA9IGN1cnJlbnRVc2VyOwogICAgICAgIH0pOyAvL3N0YXJ0IGdldHRpbmcgZnJpZW5kIGxpc3QKCiAgICAgICAgdmFyIGl0ZW1zID0gZ2V0RGF0YSh1c2VyLnVpZCwgImZyaWVuZHMiKTsKICAgICAgICBpdGVtcy50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gT2JqZWN0LnZhbHVlcyhyZXN1bHQpOyAvL2NvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzdWx0KSwKICAgICAgICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coaXRlbSkKICAgICAgICAgICAgICAgICAgZ2V0U2VhcmNoVXNlcihpdGVtLmVtYWlsKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICB1aWQ6IHVzZXIudWlkLAogICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVQaWM6IHVzZXIucHJvZmlsZVBpYwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF90aGlzMy5teUZyaWVuZHMucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJObyBGcmllbmRzIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJObyBGcmllbmRsaXN0Iik7CiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vZW5kIGdldHRpbmcgZnJpZW5kIGxpc3QKICAgICAgICAvLyAuLi4KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygiTm8gdXNlciIpOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9sb2dpbiI7CiAgICAgIH0KICAgIH0pOwogIH0KfTsgLy8gYXN5bmMgZnVuY3Rpb24gZ2V0VXNlcih1aWQpewovLyAgICAgdmFyIGRiID0gZ2V0RmlyZXN0b3JlKCk7Ci8vICAgICB2YXIgZG9jUmVmID0gZG9jKGRiLCJ1c2VycyIsdWlkKTsKLy8gICAgIHZhciBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7Ci8vICAgICBpZihkb2NTbmFwLmV4aXN0cygpKXsKLy8gICAgICAgICByZXR1cm4gZG9jU25hcC5kYXRhKCk7Ci8vICAgICB9ZWxzZXsKLy8gICAgICAgICByZXR1cm4gZmFsc2U7Ci8vICAgICB9Ci8vIH0KCmZ1bmN0aW9uIGdldERhdGEoX3gsIF94MikgewogIHJldHVybiBfZ2V0RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0RGF0YSgpIHsKICBfZ2V0RGF0YSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1aWQsIHNvdXJjZSkgewogICAgdmFyIGRiLCByZXN1bHQsIHF1ZXJ5U25hcHNob3Q7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vZ2V0IGFsbCB0YXNrIHRoYXQgYSB1aWQgaGF2ZSBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIHRhc2tpdGVtIG9iamVjdHMKICAgICAgICAgICAgLy9pZiB1c2VyIHlldCB0byBoYXZlIGFueSB0YXNrLCBudWxsIHdpbGwgYmUgcmV0dXJuZWQgCiAgICAgICAgICAgIGRiID0gZ2V0RmlyZXN0b3JlKCk7CiAgICAgICAgICAgIHJlc3VsdCA9IG51bGw7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCBzb3VyY2UpKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZG9jLmRhdGEoKSk7CiAgICAgICAgICAgICAgaWYgKGRvYy5pZCA9PSB1aWQpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kYXRhKCk7IC8vY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCEocmVzdWx0ICE9IG51bGwgJiYgT2JqZWN0LnZhbHVlcyhyZXN1bHQpLmxlbmd0aCAhPSAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEoc291cmNlID09ICJmcmllbmRzIikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIE9iamVjdC52YWx1ZXMocmVzdWx0Lm15RnJpZW5kcykpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGlmICghKHNvdXJjZSA9PSAibWVzc2FnZXMiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgT2JqZWN0LnZhbHVlcyhyZXN1bHQuY2hhdHMpKTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9nZXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9zZW5kTWVzc2FnZShfeDMsIF94NCwgX3g1KSB7CiAgcmV0dXJuIF9zZW5kTWVzc2FnZTIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3NlbmRNZXNzYWdlMigpIHsKICBfc2VuZE1lc3NhZ2UyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihmcmllbmQsIHVzZXIsIG1lc3NhZ2UpIHsKICAgIHZhciBkYjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGRiID0gZ2V0RmlyZXN0b3JlKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBzZXREb2MoZG9jKGRiLCAibWVzc2FnZXMiLCB1c2VyLnVpZCArIGZyaWVuZC51aWQpLCB7CiAgICAgICAgICAgICAgY2hhdHM6IG1lc3NhZ2UKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwogIHJldHVybiBfc2VuZE1lc3NhZ2UyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGdldFNlYXJjaFVzZXIoX3g2KSB7CiAgcmV0dXJuIF9nZXRTZWFyY2hVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRTZWFyY2hVc2VyKCkgewogIF9nZXRTZWFyY2hVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhlbWFpbCkgewogICAgdmFyIGRiLCB1c2VyLCBxdWVyeVNuYXBzaG90OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZGIgPSBnZXRGaXJlc3RvcmUoKTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAidXNlcnMiKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBxdWVyeVNuYXBzaG90ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgJHtkb2MuaWR9ID0+ICR7ZG9jLmRhdGEoKS5lbWFpbH1gKTsKICAgICAgICAgICAgICBpZiAoZG9jLmRhdGEoKS5lbWFpbCA9PSBlbWFpbCkgewogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkb2MuaWQpOwogICAgICAgICAgICAgICAgdXNlciA9IHsKICAgICAgICAgICAgICAgICAgdWlkOiBkb2MuaWQsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBkb2MuZGF0YSgpLmVtYWlsLAogICAgICAgICAgICAgICAgICB1c2VybmFtZTogZG9jLmRhdGEoKS51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcHJvZmlsZVBpYzogZG9jLmRhdGEoKS5wcm9maWxlUGljCiAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKHRlbXApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB1c2VyKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRTZWFyY2hVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["Messaging.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div id=\"app\" class=\"container p-0\" style=\"width: 75%;\">\n\t\t<div class=\"card m-3\">\n\t\t\t<div class=\"row g-0\">\n\t\t\t\t<div class=\"chat-messages col-12 col-lg-5 col-xl-3 border bg-light\">\n\t\t\t\t\t<div class=\"px-4 d-none d-md-block\">\n\t\t\t\t\t\t<div class=\"d-flex align-items-center\">\n\t\t\t\t\t\t\t<div class=\"flex-grow-1\">\n\t\t\t\t\t\t\t\t<p>Chats</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<a v-for=\"(friend,key) in myFriends\" v-bind:key=\"key\" class=\"list-group-item list-group-item-action border\">\n\t\t\t\t\t\t<div class=\"d-flex align-items-start\">\n\t\t\t\t\t\t\t<div class=\"flex-grow-1 ml-3 text-start\" @click=\"getMessage(friend);\">\n\t\t\t\t\t\t\t\t<img :src=\"friend.profilePic\" class=\"rounded-circle mr-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\">{{friend.username}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<hr class=\"d-block d-lg-none mt-1 mb-0\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-12 col-lg-7 col-xl-9 bg-light\" style=\"height:600px\">\n\t\t\t\t\t<div class=\"py-2 px-4 border-bottom d-none d-lg-block\">\n\t\t\t\t\t\t<div class=\"d-flex align-items-center py-1\">\n\t\t\t\t\t\t\t<div class=\"flex-grow-1 pl-3\">\n\t\t\t\t\t\t\t\t<strong v-if=\"currentChatFriend != null\">{{currentChatFriend.username}}</strong>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div id=\"chatHistory\" class=\"chat-messages\" style=\"height:500px\" @click=\"scrollToBottom\">\n                        <div v-for=\"(msg,key) in showMessage\" v-bind:key=\"key\" class=\"position-relative\">\n                            <div  class=\"chat-messages p-4\">\n                                <div v-if=\"msg.sender == user.uid \" class=\"chat-message-right pb-4\">\n                                    <div>\n                                        <img :src=\"user.profilePic\" class=\"rounded-circle mr-1\" alt=\"Chris Wood\" width=\"40\" height=\"40\">\n                                        <br>\n                                        <small class=\"text-muted small text-nowrap mt-2 text-end\">{{msg.date}}</small>\n                                    </div>\n                                    <div class=\"flex-shrink-1 bg-primary text-light rounded px-2 mr-3 w-50 h-50\" >\n                                        <div class=\" font-weight-bold text-end\">You</div>\n                                        <p class=\"text-start\">{{msg.message}}</p>\n                                    </div>\n                                    \n                                </div>\n                                <div v-else class=\"chat-message-left pb-4\">\n                                    <div>\n                                        <img :src=\"currentChatFriend.profilePic\" class=\"rounded-circle mr-1\" alt=\"Sharon Lessman\" width=\"40\" height=\"40\">\n                                        <br>\n                                        <small class=\"text-muted small text-nowrap mt-2 text-start\">{{msg.date}}</small>\n                                    </div>\n                                    <div class=\"flex-shrink-1 bg-success text-light rounded px-2 ml-3 w-50\">\n                                        <div class=\" font-weight-bold text-start\">{{currentChatFriend.username}}</div>\n                                        <p class=\"text-start\">{{msg.message}}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n\t\t\t\t</div>\n                <div v-if =\"currentChatFriend != null\" class=\"flex-grow-0 py-3 px-4 border-top bg-light\">\n                    <div class=\"input-group\">\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Type your message\" v-model=\"inputMessage\" v-on:keyup.enter=\"sendMessage\">\n                        <button v-if=\"inputMessage.trim() ==''\" class=\"btn btn-primary\" disabled>Send</button>\n                        <button v-else class=\"btn btn-primary\" @click=\"sendMessage()\">Send</button>\n                    </div>\n                </div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport { getAuth , onAuthStateChanged} from \"firebase/auth\";\nimport { getFirestore, doc, getDocs, collection , onSnapshot, setDoc} from '@firebase/firestore';\nexport default{\n    name: 'app',\n    data(){\n        return{\n            user:{\n                uid : \"\",\n                email : \"\",\n                username : \"\",\n                profilePic : \"\",\n            },\n            myFriends : [],\n\n            inputMessage : \"\",\n            showMessage :[],\n            currentChatFriend : null,\n        }\n    },\n    methods:{\n        getMessage(friend){\n            this.showMessage =[];\n            this.currentChatFriend = friend;\n            var db = getFirestore();\n            console.log(this.user.uid)\n            onSnapshot(doc(db, \"messages\",this.user.uid+friend.uid),(doc)=>{\n                console.log(\"Current Data: \",doc.data());\n                if(doc.data()){\n                    this.showMessage = doc.data().chats;\n                    setTimeout(this.scrollToBottom,1000);\n                }\n            });\n            \n        },\n        sendMessage(){\n            if(this.inputMessage.trim() == \"\"){\n                return\n            }\n            //var db = getFirestore();\n            var newAllMessage =[];\n            \n            var newMsg = {\n                sender : this.user.uid,\n                message : this.inputMessage,\n                date : new Date().toDateString()\n            };\n            console.log(\"New message:\",newMsg)\n            var allMessage = getData(this.user.uid+this.currentChatFriend.uid,\"messages\");\n            allMessage.then((result)=>{\n                if(result != null){\n                    if(result.length != 0){\n                    result = Object.values(result);\n                    //console.log(result);\n                    for(let item of result){\n                        //console.log(item)\n                        var temp = {\n                            sender : item.sender,\n                            message : item.message,\n                            date : item.date\n                        }\n                        newAllMessage.push(temp);\n                    }\n                    }else{\n                        \n                        console.log(\"No chat\")\n                    }\n                    \n                }else{\n                    console.log(\"No chat list\");\n                }\n                newAllMessage.push(newMsg);\n                var update = sendMessage(this.currentChatFriend,this.user,newAllMessage);\n                update.then(()=>{\n                    console.log(\"chat updated\");\n                    var updateFriend = sendMessage(this.user,this.currentChatFriend,newAllMessage);\n                    updateFriend.then(()=>{\n                        console.log(\"friend chat updated\");\n                        this.inputMessage=\"\";\n                    })\n                });\n            });\n\n        },\n        scrollToBottom(){\n            var myDiv = document.getElementById(\"chatHistory\");\n            myDiv.scrollTop = myDiv.scrollHeight;\n        }\n    },\n    beforeCreate(){\n        const auth = getAuth();\n        onAuthStateChanged(auth, (user) => {\n        if (user) {\n            // User is signed in, see docs for a list of available properties\n            // https://firebase.google.com/docs/reference/js/firebase.User\n            //console.log(user.uid);\n            getSearchUser(user.email).then((currentUser)=>{\n                this.user = currentUser;\n            });\n\n        //start getting friend list\n        var items = getData(user.uid,\"friends\");\n        items.then((result)=>{\n          if(result != null){\n            if(result.length != 0){\n              result = Object.values(result);\n              //console.log(result);\n              for(let item of result){\n                //console.log(item)\n                getSearchUser(item.email).then((user)=>{\n                    var temp = {\n                    uid : user.uid,\n                    email : user.email,\n                    username : user.username,\n                    profilePic : user.profilePic\n                    }\n                    this.myFriends.push(temp);\n                });\n              }\n            }else{\n              console.log(\"No Friends\")\n            }\n            \n          }else{\n            console.log(\"No Friendlist\");\n          }\n        }); //end getting friend list\n            // ...\n        }else{\n        console.log(\"No user\");\n        window.location.href=\"/login\";\n        }\n        });\n    }\n}\n// async function getUser(uid){\n//     var db = getFirestore();\n//     var docRef = doc(db,\"users\",uid);\n//     var docSnap = await getDoc(docRef);\n//     if(docSnap.exists()){\n//         return docSnap.data();\n//     }else{\n//         return false;\n//     }\n// }\nasync function  getData(uid,source){\n    //get all task that a uid have and return an array of taskitem objects\n    //if user yet to have any task, null will be returned \n    var db = getFirestore();\n    var result = null;\n    const querySnapshot = await getDocs(collection(db, source));\n    querySnapshot.forEach((doc) => {\n    //console.log(doc.data());\n    if(doc.id == uid){\n        result = doc.data();\n        //console.log(result);\n    }\n\n    });\n    if(result != null && Object.values(result).length != 0){\n      if(source == \"friends\"){\n        return Object.values(result.myFriends);\n      }else if(source == \"messages\"){\n        return Object.values(result.chats);\n      }\n    }\n    else{\n      return result;\n    }\n  \n}\nasync function sendMessage(friend,user,message){\n    var db = getFirestore();\n    console.log(message)\n    await setDoc(doc(db,\"messages\",user.uid+friend.uid),{\n      chats : message\n    });\n}\nasync function getSearchUser(email){\n    var db = getFirestore();\n    var user\n    const querySnapshot = await getDocs(collection(db, \"users\"));\n    querySnapshot.forEach((doc) => {\n    //console.log(`${doc.id} => ${doc.data().email}`);\n    if(doc.data().email == email){\n      //console.log(doc.id);\n      user = {\n        uid : doc.id,\n        email : doc.data().email,\n        username : doc.data().username,\n        profilePic : doc.data().profilePic\n      }\n      //console.log(temp);\n      \n    }\n});\n    return user;\n}\n\n</script>\n<style>\n.chat-messages {\n    display: flex-box;\n    flex-direction: row-reverse;\n    max-height: 800px;\n    overflow: auto;\n}\n\n.chat-message-left,\n.chat-message-right {\n    display: flex;\n    flex-shrink: 0\n}\n\n.chat-message-left {\n    margin-right: auto\n}\n\n.chat-message-right {\n    flex-direction: row-reverse;\n    margin-left: auto\n}\n.py-3 {\n    padding-top: 1rem!important;\n    padding-bottom: 1rem!important;\n}\n.px-4 {\n    padding-right: 1.5rem!important;\n    padding-left: 1.5rem!important;\n}\n.flex-grow-0 {\n    flex-grow: 0!important;\n}\n.border-top {\n    border-top: 1px solid #dee2e6!important;\n}\n</style>"],"sourceRoot":"src/views"}]}